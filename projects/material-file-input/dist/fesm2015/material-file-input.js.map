{"version":3,"file":"material-file-input.js","sources":["ng://material-file-input/lib/material-file-input.component.html","ng://material-file-input/lib/material-file-input.component.ts","ng://material-file-input/lib/material-file-input.module.ts","ng://material-file-input/public-api.ts","ng://material-file-input/material-file-input.ts"],"sourcesContent":["<div class=\"mat-material-file-input-container\"\r\n     (click)=\"openChooseFile()\">\r\n  <input placeholder=\"{{placeholder}}\"\r\n         class=\"name\"\r\n         [value]=\"getName()\"\r\n         readonly=\"readonly\" />\r\n  <input *ngIf=\"multiple\"\r\n         type=\"file\"\r\n         #file\r\n         style=\"display: none\"\r\n         (change)=\"onFilesAdded()\"\r\n         multiple />\r\n\r\n  <input *ngIf=\"!multiple\"\r\n         type=\"file\"\r\n         #file\r\n         style=\"display: none\"\r\n         (change)=\"onFilesAdded()\" />\r\n  <button mat-stroked-button>{{buttonText}}</button>\r\n</div>\r\n","import { Component, ChangeDetectionStrategy, Input, OnDestroy, HostBinding, ElementRef, Optional, Self, ViewChild } from '@angular/core';\r\nimport { MatFormFieldControl } from '@angular/material/form-field';\r\nimport { Subject } from 'rxjs';\r\nimport { FormBuilder, NgControl, FormControl } from '@angular/forms';\r\nimport { FocusMonitor } from '@angular/cdk/a11y';\r\nimport { coerceBooleanProperty } from '@angular/cdk/coercion';\r\nimport { takeUntil } from 'rxjs/operators';\r\n\r\n@Component({\r\n  selector: 'mat-file-input',\r\n  templateUrl: './material-file-input.component.html',\r\n  styleUrls: ['./material-file-input.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  providers: [{ provide: MatFormFieldControl, useExisting: MatFileInputComponent }],\r\n})\r\nexport class MatFileInputComponent implements OnDestroy, MatFormFieldControl<File[]>{\r\n  static nextId = 0;\r\n  @HostBinding() id = `mat-file-input-${MatFileInputComponent.nextId++}`;\r\n  @HostBinding('class.floating')\r\n  get shouldLabelFloat() {\r\n    return this.focused || !this.empty;\r\n  }\r\n\r\n  @Input()\r\n  get placeholder() {\r\n    return this.placeholderValue;\r\n  }\r\n  set placeholder(plh) {\r\n    this.placeholderValue = plh;\r\n    this.stateChanges.next();\r\n  }\r\n  private placeholderValue = '';\r\n\r\n  @Input()\r\n  get required() {\r\n    return this.requiredValue;\r\n  }\r\n  set required(req) {\r\n    this.requiredValue = coerceBooleanProperty(req);\r\n    this.stateChanges.next();\r\n  }\r\n  private requiredValue = false;\r\n\r\n  @Input()\r\n  get disabled(): boolean { return this.disabledValue; }\r\n  set disabled(value: boolean) {\r\n    this.disabledValue = coerceBooleanProperty(value);\r\n    this.disabledValue ? this.form.disable() : this.form.enable();\r\n    this.stateChanges.next();\r\n  }\r\n  private disabledValue = false;\r\n\r\n  @Input() buttonText = 'Choose...';\r\n\r\n  errorState = false;\r\n  controlType = 'mat-material-file-input';\r\n\r\n  @HostBinding('attr.aria-describedby') describedBy = '';\r\n\r\n  @Input() multiple = false;\r\n  onChange: (value) => void;\r\n  form: FormControl;\r\n  stateChanges = new Subject<void>();\r\n  focused = false;\r\n\r\n  set value(value: File[]) {\r\n    this.form.setValue(value);\r\n    this.stateChanges.next();\r\n  }\r\n\r\n  get value() {\r\n    return this.form.value;\r\n  }\r\n\r\n  get empty() {\r\n    return !this.form.value;\r\n  }\r\n\r\n  @ViewChild('file') file;\r\n\r\n  private destroyed$ = new Subject();\r\n\r\n  constructor(\r\n    @Optional() @Self() public ngControl: NgControl,\r\n    fb: FormBuilder,\r\n    private fm: FocusMonitor,\r\n    private elRef: ElementRef<HTMLElement>\r\n  ) {\r\n    // Replace the provider from above with this.\r\n    if (this.ngControl != null) {\r\n      // Setting the value accessor directly (instead of using\r\n      // the providers) to avoid running into a circular import.\r\n      this.ngControl.valueAccessor = (this as any);\r\n    }\r\n    this.form = new FormControl(null);\r\n    this.form.valueChanges.pipe(\r\n      takeUntil(this.destroyed$)\r\n    ).subscribe(value => {\r\n      if (this.onChange) {\r\n        this.onChange(value);\r\n      }\r\n    });\r\n    fm.monitor(elRef.nativeElement, true).subscribe(origin => {\r\n      this.focused = !!origin;\r\n      this.stateChanges.next();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.stateChanges.complete();\r\n    this.fm.stopMonitoring(this.elRef.nativeElement);\r\n    this.destroyed$.next();\r\n    this.destroyed$.complete();\r\n  }\r\n\r\n  onContainerClick(event: MouseEvent) {\r\n    if ((event.target as Element).tagName.toLowerCase() !== 'input') {\r\n      this.elRef.nativeElement.querySelector('input').focus();\r\n    }\r\n  }\r\n\r\n  setDescribedByIds(ids: string[]) {\r\n    this.describedBy = ids.join(' ');\r\n  }\r\n\r\n  writeValue(value: File[]) {\r\n    this.value = value;\r\n  }\r\n\r\n  registerOnChange(fn: (value: any) => void) {\r\n    this.onChange = fn;\r\n  }\r\n\r\n  registerOnTouched() { }\r\n\r\n  openChooseFile() {\r\n    if (this.value) {\r\n      this.value = null;\r\n      this.file.nativeElement.value = '';\r\n    }\r\n    this.file.nativeElement.click();\r\n  }\r\n\r\n  onFilesAdded() {\r\n    const files = Object.values(this.file.nativeElement.files) as File[];\r\n    this.value = files;\r\n  }\r\n\r\n  getName() {\r\n    if (!this.value) {\r\n      return '';\r\n    }\r\n\r\n    return this.multiple ? this.value.map(file => file?.name).join(', ') : this.value[0]?.name;\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\nimport { MatFileInputComponent } from './material-file-input.component';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatButtonModule } from '@angular/material/button';\nimport { ReactiveFormsModule, FormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\n\n\n\n@NgModule({\n  declarations: [MatFileInputComponent],\n  imports: [\n    CommonModule,\n    MatInputModule,\n    MatButtonModule,\n    ReactiveFormsModule,\n    FormsModule\n  ],\n  exports: [MatFileInputComponent]\n})\nexport class MatFileInputModule { }\n","/*\n * Public API Surface of material-file-input\n */\n\nexport * from './lib/material-file-input.component';\nexport * from './lib/material-file-input.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["i0.ɵɵelementStart","i0.ɵɵlistener","i0.ɵɵelementEnd","i0.ɵɵelement","i0.ɵɵtemplate","i0.ɵɵtext","i0.ɵɵadvance","i0.ɵɵpropertyInterpolate","i0.ɵɵproperty","i0.ɵɵtextInterpolate"],"mappings":"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"}