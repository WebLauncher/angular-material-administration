!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("@angular/router"),require("firebase/app"),require("uuid"),require("@angular/fire/firestore"),require("@angular/fire/storage"),require("@angular/material/snack-bar"),require("@angular/common"),require("@angular/material/progress-spinner"),require("@angular/flex-layout/flex"),require("@angular/material/button"),require("@angular/material/icon"),require("@angular/material/toolbar"),require("@angular/material/card"),require("@angular/forms"),require("@ckeditor/ckeditor5-build-classic"),require("@angular/flex-layout/extended"),require("@ckeditor/ckeditor5-angular"),require("@angular/material/form-field"),require("@angular/material/input"),require("@angular/material/select"),require("@angular/material/core"),require("@angular/material/radio"),require("@angular/material/datepicker"),require("@angular/material/checkbox"),require("@angular/material/slide-toggle"),require("@weblauncher/material-file-input"),require("@angular/material/chips"),require("@angular/material/table"),require("@angular/material/menu"),require("@angular/material/list"),require("@angular/material/divider"),require("@angular/cdk/table"),require("@angular/fire"),require("@angular/flex-layout"),require("@angular/material/paginator"),require("@angular/material/sort"),require("@angular/material/sidenav"),require("@angular/platform-browser/animations")):"function"==typeof define&&define.amd?define("material-administration",["exports","@angular/core","rxjs","rxjs/operators","lodash","@angular/router","firebase/app","uuid","@angular/fire/firestore","@angular/fire/storage","@angular/material/snack-bar","@angular/common","@angular/material/progress-spinner","@angular/flex-layout/flex","@angular/material/button","@angular/material/icon","@angular/material/toolbar","@angular/material/card","@angular/forms","@ckeditor/ckeditor5-build-classic","@angular/flex-layout/extended","@ckeditor/ckeditor5-angular","@angular/material/form-field","@angular/material/input","@angular/material/select","@angular/material/core","@angular/material/radio","@angular/material/datepicker","@angular/material/checkbox","@angular/material/slide-toggle","@weblauncher/material-file-input","@angular/material/chips","@angular/material/table","@angular/material/menu","@angular/material/list","@angular/material/divider","@angular/cdk/table","@angular/fire","@angular/flex-layout","@angular/material/paginator","@angular/material/sort","@angular/material/sidenav","@angular/platform-browser/animations"],t):t((e=e||self)["material-administration"]={},e.ng.core,e.rxjs,e.rxjs.operators,e.lodash,e.ng.router,e.app,e.uuid,e.ng.fire.firestore,e.ng.fire.storage,e.ng.material.snackBar,e.ng.common,e.ng.material.progressSpinner,e.ng.flexLayout.flex,e.ng.material.button,e.ng.material.icon,e.ng.material.toolbar,e.ng.material.card,e.ng.forms,e.ClassicEditor,e.ng.flexLayout.extended,e.ckeditor5Angular,e.ng.material.formField,e.ng.material.input,e.ng.material.select,e.ng.material.core,e.ng.material.radio,e.ng.material.datepicker,e.ng.material.checkbox,e.ng.material.slideToggle,e.materialFileInput,e.ng.material.chips,e.ng.material.table,e.ng.material.menu,e.ng.material.list,e.ng.material.divider,e.ng.cdk.table,e.ng.fire,e.ng.flexLayout,e.ng.material.paginator,e.ng.material.sort,e.ng.material.sidenav,e.ng.platformBrowser.animations)}(this,(function(e,t,n,a,i,r,l,o,u,d,c,p,m,s,f,v,g,h,y,M,x,b,C,S,I,E,k,$,w,A,N,F,T,L,D,O,B,j,_,P,R,V,q){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var U=function(e,t){return(U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function z(e,t){function n(){this.constructor=e}U(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var H=function(){return(H=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function W(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var a,i,r=n.call(e),l=[];try{for(;(void 0===t||t-- >0)&&!(a=r.next()).done;)l.push(a.value)}catch(e){i={error:e}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(i)throw i.error}}return l}var G=function(){function e(e,t){this.db=e,this.storage=t}return e.prototype.get=function(e,t){return this.db.collection(e).doc(t).valueChanges()},e.prototype.list=function(e,t){return this.db.collection(e).valueChanges({idField:t})},e.prototype.add=function(e,t){return n.from(this.db.collection(e).add(t))},e.prototype.update=function(e,t,a){return n.from(this.db.collection(e).doc(t).update(a))},e.prototype.delete=function(e,t){return n.from(this.db.collection(e).doc(t).delete())},e.prototype.upload=function(e){var t=o.v4()+"_"+(null==e?void 0:e.name),i=this.storage.ref(t),r=this.storage.upload(t,e),l=new n.Subject;return r.snapshotChanges().pipe(a.finalize((function(){i.getDownloadURL().subscribe((function(e){l.next({downloadUrl:e,path:t}),l.complete()}))}))).subscribe(),l.pipe(a.filter(Boolean))},e.prototype.removeUpload=function(e){return this.storage.ref(e).delete()},e.prototype.getTimestamp=function(){return l.firestore.FieldValue.serverTimestamp()},e.ɵfac=function(n){return new(n||e)(t.ɵɵinject(u.AngularFirestore),t.ɵɵinject(d.AngularFireStorage))},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),J=function(){function e(e,t,i){var r=this;this.route=e,this.dataAdapterService=t,this.metadata=i,this.metadata$=new n.BehaviorSubject(null),this.collectionPath$=new n.BehaviorSubject(null),this.collectionName$=new n.BehaviorSubject(null),this.subCollections$=new n.BehaviorSubject(null),this.isLoading$=new n.BehaviorSubject(!0),this.destroyed$=new n.Subject,this.route.params.pipe(a.map((function(e){return null==e?void 0:e.collection})),a.tap((function(){return r.isLoading$.next(!0)})),a.takeUntil(this.destroyed$)).subscribe(this.collectionPath$),this.collectionPath$.pipe(a.map((function(e){return e.replace(/\:/gi,"/")})),a.shareReplay(1)).subscribe(this.collectionName$),this.collectionName$.pipe(a.map((function(e){return r.getMetadata(e,i)})),a.shareReplay(1)).subscribe(this.metadata$),this.metadata$.pipe(a.map((function(e){return(null==e?void 0:e.entities)?Object.keys(e.entities).map((function(t){return H({id:t},e.entities[t])})):null}))).subscribe(this.subCollections$)}return e.prototype.ngOnDestroy=function(){this.destroyed$.next(),this.destroyed$.complete()},e.prototype.getFieldLabel=function(e){return"string"==typeof e?i.capitalize(e):i.capitalize(null==e?void 0:e.label)},e.prototype.getFields=function(){var e=this;return this.metadata$.pipe(a.map((function(t){return Object.entries(null==t?void 0:t.fields).map((function(t){var n,a=W(t,2),i=a[0],r=a[1];return"object"==typeof r?H(H({},r),{name:i,label:(null===(n=r)||void 0===n?void 0:n.label)||e.getFieldLabel(i)}):{name:i,label:e.getFieldLabel(i)}})).filter((function(n){return e.showField(t,n)}))})),a.switchMap((function(t){return n.forkJoin(t.map((function(t){return e.addAdditionalMetadata(t)})))})),a.catchError((function(e){return console.error(e),n.of([])})),a.shareReplay(1))},e.prototype.processUploads=function(e,t,i){var r=this,l=Object.keys(e).filter((function(t){return Array.isArray(e[t])&&e[t][0]instanceof File}));if(l.length){var o={};return n.forkJoin(l.map((function(t){return r.dataAdapterService.upload(e[t][0]).pipe(a.map((function(e){return{key:t,downloadData:e}})),a.catchError((function(e){return console.error(e),n.of(null)})))}))).pipe(a.map((function(t){return t&&t.forEach((function(e){var t,n;o[null==e?void 0:e.key]=null===(t=null==e?void 0:e.downloadData)||void 0===t?void 0:t.downloadUrl,o[(null==e?void 0:e.key)+"Path"]=null===(n=null==e?void 0:e.downloadData)||void 0===n?void 0:n.path})),H(H({},e),o)})))}return n.of(e)},e.prototype.getWithTimestamps=function(e,t){var n,a,i,r,l=H({},e),o=this.dataAdapterService.getTimestamp();return"add"===t&&(null===(n=this.metadata$.getValue())||void 0===n?void 0:n.createdTimestamp)&&(l[null===(a=this.metadata$.getValue())||void 0===a?void 0:a.createdTimestamp]=o),(null===(i=this.metadata$.getValue())||void 0===i?void 0:i.updatedTimestamp)&&(l[null===(r=this.metadata$.getValue())||void 0===r?void 0:r.updatedTimestamp]=o),l},e.prototype.getFieldMedatada=function(e){var t,n;return null===(n=null===(t=this.metadata$.getValue())||void 0===t?void 0:t.entities)||void 0===n?void 0:n[e]},e.prototype.getMetadata=function(e,t){var n=e.split("/");return 1===n.length?t.entities[n[0]]||null:this.getMetadata(n.slice(2).join("/"),t.entities[n[0]])},e.prototype.addAdditionalMetadata=function(e){var t,i,r;return"select"!==(null==e?void 0:e.inputType)&&"radio"!==(null==e?void 0:e.inputType)||"collection"!==(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.type)?n.of(e):this.dataAdapterService.list(null===(i=null==e?void 0:e.data)||void 0===i?void 0:i.collection,null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.collectionValue).pipe(a.take(1),a.map((function(t){return H(H({},e),{options:t.map((function(t){var n,a;return{value:t[null===(n=null==e?void 0:e.data)||void 0===n?void 0:n.collectionValue],label:t[null===(a=null==e?void 0:e.data)||void 0===a?void 0:a.collectionLabel]}}))})})))},e.prototype.showField=function(e,t){return!("id"===t.name||(null==e?void 0:e.createdTimestamp)&&(null==e?void 0:e.createdTimestamp)===t.name||(null==e?void 0:e.updatedTimestamp)&&(null==e?void 0:e.updatedTimestamp)===t.name)},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(r.ActivatedRoute),t.ɵɵdirectiveInject(G),t.ɵɵdirectiveInject("MAT_ADMINISTRATION_METADATA",8))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["mat-administration-metadata"]],decls:2,vars:0,template:function(e,n){1&e&&(t.ɵɵelementStart(0,"p"),t.ɵɵtext(1,"metadata works!"),t.ɵɵelementEnd())},styles:[""]}),e}(),K=function(){function e(e){this.snackbar=e}return e.prototype.error=function(e){this.snackbar.open(e,"Close",{duration:3e3,panelClass:"snackbar-error"})},e.prototype.success=function(e){this.snackbar.open(e,"Close",{duration:3e3,panelClass:"snackbar-success"})},e.ɵfac=function(n){return new(n||e)(t.ɵɵinject(c.MatSnackBar))},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac,providedIn:"root"}),e}(),Q=function(){function e(e,t){this.datePipe=e,this.metadata=t}return e.prototype.transform=function(e,t,n){var a;switch(void 0===n&&(n=null),t){case"timestamp":return this.datePipe.transform(null==e?void 0:e.toDate(),(null==n?void 0:n.format)||(null===(a=this.metadata)||void 0===a?void 0:a.timestampFormat),n.timezone,null==n?void 0:n.locale);default:return e}},e.ɵfac=function(n){return new(n||e)(t.ɵɵinject(p.DatePipe),t.ɵɵinject("MAT_ADMINISTRATION_METADATA",8))},e.ɵprov=t.ɵɵdefineInjectable({token:e,factory:e.ɵfac,providedIn:"root"}),e}();function X(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtext(1),t.ɵɵpipe(2,"async"),t.ɵɵelementContainerEnd()),2&e){var a=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(2,1,a.source)," ")}}function Y(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtext(1),t.ɵɵelementContainerEnd()),2&e){var a=t.ɵɵnextContext().$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",a.name," ")}}function Z(e,n){1&e&&(t.ɵɵelementStart(0,"mat-icon"),t.ɵɵtext(1,"arrow_right"),t.ɵɵelementEnd())}function ee(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"div",2),t.ɵɵelementStart(2,"a",3),t.ɵɵtemplate(3,X,3,3,"ng-container",4),t.ɵɵtemplate(4,Y,2,1,"ng-container",4),t.ɵɵelementEnd(),t.ɵɵtemplate(5,Z,2,0,"mat-icon",4),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var a=n.$implicit,i=n.last;t.ɵɵadvance(2),t.ɵɵproperty("routerLink",a.url),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",a.source),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!a.source),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!i)}}var te=function(){function e(e,t){this.metadata=e,this.dataAdapterService=t,this.collectionName$=new n.BehaviorSubject("")}return Object.defineProperty(e.prototype,"collectionName",{get:function(){return this.collectionName$.getValue()},set:function(e){this.collectionName$.next(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.links$=this.collectionName$.pipe(a.map((function(t){var n=t.split("/");return e.getLinks(n,e.metadata.entities[n[0]])})))},e.prototype.getLinks=function(e,t,n){return void 0===n&&(n="/"),1===e.length?this.getPartUrls(e[0],t,n,this.action):function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(W(arguments[t]));return e}(this.getPartUrls(e[0],t,n,"list"),[this.getItemUrl(e[0],e[1],t,n)],this.getLinks(e.slice(2),t.entities[e[2]],""+n+e[0]+":"+e[1]+":"))},e.prototype.getItemUrl=function(e,t,n,i){return{name:n.titleField||"title",source:this.dataAdapterService.get(e,t).pipe(a.map((function(e){return null==e?void 0:e[n.titleField||"title"]}))),url:[""+i+e+"/update/"+t]}},e.prototype.getPartUrls=function(e,t,n,a,r){return void 0===n&&(n=""),void 0===a&&(a="list"),void 0===r&&(r=""),"list"===a?[{name:i.capitalize(t.plural),url:[""+n+e+"/list"]}]:"add"===a?[{name:i.capitalize(t.plural),url:[""+n+e+"/list"]},{name:"Add "+t.single,url:null}]:"update"===a?[{name:i.capitalize(t.plural),url:[""+n+e+"/list"]},{name:"Update "+t.single,url:null}]:void 0},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject("MAT_ADMINISTRATION_METADATA",8),t.ɵɵdirectiveInject(G))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["mat-administration-breadcrumbs"]],inputs:{collectionName:"collectionName",action:"action"},decls:3,vars:3,consts:[["fxLayout","row","fxAlign","start"],[4,"ngFor","ngForOf"],["fxLayout","row","fxLayoutAlign","start center"],["mat-button","",3,"routerLink"],[4,"ngIf"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"div",0),t.ɵɵtemplate(1,ee,6,4,"ng-container",1),t.ɵɵpipe(2,"async"),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(2,1,n.links$)))},directives:[s.DefaultLayoutDirective,p.NgForOf,s.DefaultLayoutAlignDirective,f.MatAnchor,r.RouterLinkWithHref,p.NgIf,v.MatIcon],pipes:[p.AsyncPipe],styles:[""]}),e}();function ne(e,n){1&e&&t.ɵɵelementContainer(0)}var ae=function(e){return{field:e}};function ie(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,ne,1,0,"ng-container",6),t.ɵɵelementEnd()),2&e){var a=n.$implicit;t.ɵɵnextContext(2);var i=t.ɵɵreference(3);t.ɵɵadvance(1),t.ɵɵproperty("ngTemplateOutlet",i)("ngTemplateOutletContext",t.ɵɵpureFunction1(2,ae,a))}}function re(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,ie,2,4,"div",3),t.ɵɵelementStart(2,"div",4),t.ɵɵelementStart(3,"button",5),t.ɵɵtext(4,"Save "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var a=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",a.fields)}}function le(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",14),t.ɵɵelementStart(1,"label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelement(3,"ckeditor",15),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field,i=t.ɵɵnextContext();t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==a?null:a.label),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name)("editor",i.Editor)}}function oe(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field"),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelement(3,"textarea",16),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==a?null:a.label),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name)}}function ue(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-option",19),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var a=n.$implicit;t.ɵɵproperty("value",null==a?null:a.value),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",null==a?null:a.label," ")}}function de(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field"),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-select",17),t.ɵɵtemplate(4,ue,2,2,"mat-option",18),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==a?null:a.label),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",null==a?null:a.options)}}function ce(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-radio-button",19),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var a=n.$implicit;t.ɵɵproperty("value",null==a?null:a.value),t.ɵɵadvance(1),t.ɵɵtextInterpolate(null==a?null:a.label)}}function pe(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",20),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-radio-group",21),t.ɵɵtemplate(4,ce,2,2,"mat-radio-button",18),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(2),t.ɵɵtextInterpolate1("",null==a?null:a.label,":"),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name),t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",null==a?null:a.options)}}function me(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field"),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelement(3,"input",22),t.ɵɵelement(4,"mat-datepicker-toggle",23),t.ɵɵelement(5,"mat-datepicker",24,25),t.ɵɵelementEnd()),2&e){var a=t.ɵɵreference(6),i=t.ɵɵnextContext().field;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==i?null:i.label),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==i?null:i.name)("matDatepicker",a),t.ɵɵadvance(1),t.ɵɵproperty("for",a)}}function se(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",26),t.ɵɵelementStart(1,"mat-checkbox",27),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name)("value",!0),t.ɵɵadvance(1),t.ɵɵtextInterpolate(null==a?null:a.label)}}function fe(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",26),t.ɵɵelementStart(1,"mat-slide-toggle",21),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",null==a?null:a.label," ")}}function ve(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field"),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelement(3,"mat-file-input",28),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==a?null:a.label),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name)("placeholder",null==a?null:a.placeholder)}}function ge(e,n){if(1&e){var a=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"div"),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"div",29),t.ɵɵelement(4,"img",30),t.ɵɵelementStart(5,"button",31),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(a);var e=t.ɵɵnextContext(2).field;return t.ɵɵnextContext().removeImage(e)})),t.ɵɵtext(6,"Remove"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2).field;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==i?null:i.label),t.ɵɵadvance(2),t.ɵɵproperty("src",null==i?null:i.value,t.ɵɵsanitizeUrl)}}function he(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field"),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelement(3,"mat-file-input",28),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext(2).field;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==a?null:a.label),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name)("placeholder",null==a?null:a.placeholder)}}function ye(e,n){if(1&e&&(t.ɵɵelementStart(0,"div"),t.ɵɵtemplate(1,ge,7,2,"div",1),t.ɵɵtemplate(2,he,4,3,"mat-form-field",1),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(1),t.ɵɵproperty("ngIf",null==a?null:a.value),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",!(null!=a&&a.value))}}function Me(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-form-field"),t.ɵɵelementStart(1,"mat-label"),t.ɵɵtext(2),t.ɵɵelementEnd(),t.ɵɵelement(3,"input",32),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().field;t.ɵɵadvance(2),t.ɵɵtextInterpolate(null==a?null:a.label),t.ɵɵadvance(1),t.ɵɵproperty("formControlName",null==a?null:a.name)("placeholder",null==a?null:a.placeholder)}}function xe(e,n){if(1&e&&(t.ɵɵelementStart(0,"div",7),t.ɵɵelementContainerStart(1,8),t.ɵɵtemplate(2,le,4,3,"div",9),t.ɵɵtemplate(3,oe,4,2,"mat-form-field",10),t.ɵɵtemplate(4,de,5,3,"mat-form-field",10),t.ɵɵtemplate(5,pe,5,3,"div",11),t.ɵɵtemplate(6,me,7,4,"mat-form-field",10),t.ɵɵtemplate(7,se,3,3,"div",12),t.ɵɵtemplate(8,fe,3,2,"div",12),t.ɵɵtemplate(9,ve,4,3,"mat-form-field",10),t.ɵɵtemplate(10,ye,3,2,"div",10),t.ɵɵtemplate(11,Me,4,3,"mat-form-field",13),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()),2&e){var a=n.field;t.ɵɵproperty("ngStyle",null==a||null==a.style?null:a.style.form),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitch",null==a?null:a.inputType),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","ckeditor"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","textarea"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","select"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","radio"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","datepicker"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","checkbox"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","toggle"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","file"),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","image")}}var be=function(){function e(e){this.formBuilder=e,this.save=new t.EventEmitter,this.valueChanges=new t.EventEmitter,this.Editor=M,this.destroyed$=new n.Subject}return e.prototype.ngOnInit=function(){var e,t=this;this.fields&&(this.form=this.formBuilder.group(null===(e=this.fields)||void 0===e?void 0:e.reduce((function(e,n){var a;return H(H({},e),((a={})[null==n?void 0:n.name]=[t.getFieldValue(n),t.getFieldValidators(n)],a))}),{})),this.form.valueChanges.pipe(a.takeUntil(this.destroyed$)).subscribe(this.valueChanges))},e.prototype.ngOnDestroy=function(){this.destroyed$.next(),this.destroyed$.complete()},e.prototype.submit=function(){this.form.valid&&this.save.emit(this.form.value)},e.prototype.removeImage=function(e){e.value=null,this.form.get(e.name).setValue(null)},e.prototype.getFieldValue=function(e){return null==e?void 0:e.value},e.prototype.getFieldValidators=function(e){return[y.Validators.required]},e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject(y.FormBuilder))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["mat-administration-form"]],inputs:{fields:"fields"},outputs:{save:"save",valueChanges:"valueChanges"},decls:4,vars:2,consts:[[3,"formGroup","ngSubmit"],[4,"ngIf"],["formField",""],[4,"ngFor","ngForOf"],[1,"flex","justify-end"],["mat-raised-button","","color","primary","type","submit"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"form-field-container",3,"ngStyle"],[3,"ngSwitch"],["class","ckeditor",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","radio",4,"ngSwitchCase"],["class","checkbox",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"ckeditor"],[3,"formControlName","editor"],["matInput","",3,"formControlName"],[3,"formControlName"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"radio"],["color","primary",3,"formControlName"],["matInput","",3,"formControlName","matDatepicker"],["matSuffix","",3,"for"],["touchUi",""],["picker",""],[1,"checkbox"],["color","primary",3,"formControlName","value"],[3,"formControlName","placeholder"],["fxLayout","row","fxLayoutAlign","start"],["alt","field?.label",1,"file-input-image",3,"src"],["type","button","mat-raised-button","",3,"click"],["matInput","",3,"formControlName","placeholder"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"form",0),t.ɵɵlistener("ngSubmit",(function(){return n.submit()})),t.ɵɵtemplate(1,re,5,1,"ng-container",1),t.ɵɵtemplate(2,xe,12,11,"ng-template",null,2,t.ɵɵtemplateRefExtractor),t.ɵɵelementEnd()),2&e&&(t.ɵɵproperty("formGroup",n.form),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",n.fields))},directives:[y.ɵangular_packages_forms_forms_y,y.NgControlStatusGroup,y.FormGroupDirective,p.NgIf,p.NgForOf,f.MatButton,p.NgTemplateOutlet,p.NgStyle,x.DefaultStyleDirective,p.NgSwitch,p.NgSwitchCase,p.NgSwitchDefault,b.CKEditorComponent,y.NgControlStatus,y.FormControlName,C.MatFormField,C.MatLabel,S.MatInput,y.DefaultValueAccessor,I.MatSelect,E.MatOption,k.MatRadioGroup,k.MatRadioButton,$.MatDatepickerInput,$.MatDatepickerToggle,C.MatSuffix,$.MatDatepicker,w.MatCheckbox,A.MatSlideToggle,N.MatFileInputComponent,s.DefaultLayoutDirective,s.DefaultLayoutAlignDirective],styles:["[_nghost-%COMP%]{display:block}mat-form-field[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]     .ck-editor__editable_inline{min-height:200px}.ckeditor[_ngcontent-%COMP%]{margin-bottom:1rem}.ckeditor[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{opacity:.54;transform:scale(.75)}.radio[_ngcontent-%COMP%]{margin-bottom:1rem}.radio[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{margin-right:1rem}.radio[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{margin-right:.5rem}.file-input-image[_ngcontent-%COMP%]{max-height:3rem;margin-right:1rem}"],changeDetection:0}),e}();function Ce(e,n){1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵelement(1,"mat-spinner",4),t.ɵɵelementEnd())}function Se(e,n){if(1&e){var a=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-administration-form",9),t.ɵɵlistener("save",(function(e){return t.ɵɵrestoreView(a),t.ɵɵnextContext(2).save(e)})),t.ɵɵpipe(1,"async"),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵproperty("fields",t.ɵɵpipeBind1(1,1,i.fields$))}}function Ie(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelement(1,"mat-administration-breadcrumbs",5),t.ɵɵpipe(2,"async"),t.ɵɵelementStart(3,"mat-toolbar",6),t.ɵɵelementStart(4,"h1"),t.ɵɵtext(5),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"a",7),t.ɵɵpipe(7,"async"),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"keyboard_backspace"),t.ɵɵelementEnd(),t.ɵɵtext(10," Cancel "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(11,"mat-card"),t.ɵɵtemplate(12,Se,2,3,"mat-administration-form",8),t.ɵɵpipe(13,"async"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var a=n.ngIf,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("collectionName",t.ɵɵpipeBind1(2,4,i.collectionName$)),t.ɵɵadvance(4),t.ɵɵtextInterpolate1("Add ",null==a?null:a.single,""),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate1("routerLink","/",t.ɵɵpipeBind1(7,6,i.collectionPath$),"/list"),t.ɵɵadvance(6),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(13,8,i.fields$))}}function Ee(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip-list"),t.ɵɵelementStart(1,"mat-chip",10),t.ɵɵtext(2,"No entity metadata defined for "),t.ɵɵelementStart(3,"strong"),t.ɵɵtext(4),t.ɵɵpipe(5,"async"),t.ɵɵelementEnd(),t.ɵɵtext(6,"!"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,1,a.collectionName$))}}var ke=function(e){function l(t,n,i,r,l){var o=e.call(this,t,r,l)||this;return o.route=t,o.snackbar=n,o.router=i,o.dataAdapterService=r,o.metadata=l,o.fields$=o.getFields().pipe(a.tap((function(){o.isLoading$.next(!1)}))),o}return z(l,e),l.prototype.save=function(e){var t=this;this.isLoading$.next(!0),n.combineLatest([this.metadata$,this.collectionName$]).pipe(a.take(1),a.switchMap((function(n){var i=W(n,2),r=i[0],l=i[1];return t.processUploads(e,r,"add").pipe(a.map((function(e){return[r,l,e]})))})),a.switchMap((function(e){var n=W(e,3),a=(n[0],n[1]),i=n[2];return t.dataAdapterService.add(a,t.getWithTimestamps(i,"add"))}))).subscribe((function(){var e;t.snackbar.success(i.capitalize(null===(e=t.metadata$.getValue())||void 0===e?void 0:e.single)+" added successfully!"),t.router.navigate(["/"+t.collectionPath$.getValue()+"/list"])}),(function(){var e;return t.snackbar.error("There was an error adding "+(null===(e=t.metadata$.getValue())||void 0===e?void 0:e.single)+"!")}),(function(){return t.isLoading$.next(!1)}))},l.ɵfac=function(e){return new(e||l)(t.ɵɵdirectiveInject(r.ActivatedRoute),t.ɵɵdirectiveInject(K),t.ɵɵdirectiveInject(r.Router),t.ɵɵdirectiveInject(G),t.ɵɵdirectiveInject("MAT_ADMINISTRATION_METADATA",8))},l.ɵcmp=t.ɵɵdefineComponent({type:l,selectors:[["mat-administration-add"]],features:[t.ɵɵInheritDefinitionFeature],decls:6,vars:7,consts:[["class","loading-box-overflow",4,"ngIf"],[4,"ngIf","ngIfElse"],["noMetadata",""],[1,"loading-box-overflow"],["diameter","50"],["action","add",3,"collectionName"],[1,"justify-between"],["mat-raised-button","","color","warn",3,"routerLink"],[3,"fields","save",4,"ngIf"],[3,"fields","save"],["color","warn"]],template:function(e,n){if(1&e&&(t.ɵɵtemplate(0,Ce,2,0,"div",0),t.ɵɵpipe(1,"async"),t.ɵɵtemplate(2,Ie,14,10,"ng-container",1),t.ɵɵpipe(3,"async"),t.ɵɵtemplate(4,Ee,7,3,"ng-template",null,2,t.ɵɵtemplateRefExtractor)),2&e){var a=t.ɵɵreference(5);t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(1,3,n.isLoading$)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(3,5,n.metadata$))("ngIfElse",a)}},directives:[p.NgIf,m.MatSpinner,te,g.MatToolbar,f.MatAnchor,r.RouterLinkWithHref,v.MatIcon,h.MatCard,be,F.MatChipList,F.MatChip],pipes:[p.AsyncPipe],styles:["[_nghost-%COMP%]{display:block;position:relative}"]}),l}(J);function $e(e,n){1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵelement(1,"mat-spinner",4),t.ɵɵelementEnd())}function we(e,n){if(1&e&&(t.ɵɵelementStart(0,"th",20),t.ɵɵtext(1),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",null==a?null:a.label," ")}}function Ae(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelement(1,"img",25),t.ɵɵpipe(2,"async"),t.ɵɵelementContainerEnd()),2&e){var a=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext(2).$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵstyleMap(null==i||null==i.style?null:i.style.list),t.ɵɵproperty("src",t.ɵɵpipeBind1(2,4,r.getValue(a,null==i?null:i.id)),t.ɵɵsanitizeUrl)("alt",null==i?null:i.id)}}function Ne(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelement(1,"span",26),t.ɵɵpipe(2,"async"),t.ɵɵelementContainerEnd()),2&e){var a=t.ɵɵnextContext().$implicit,i=t.ɵɵnextContext(2).$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵstyleMap(null==i||null==i.style?null:i.style.list),t.ɵɵproperty("innerHTML",t.ɵɵpipeBind1(2,3,r.getValue(a,null==i?null:i.id)),t.ɵɵsanitizeHtml)}}function Fe(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",21),t.ɵɵelementContainerStart(1,22),t.ɵɵtemplate(2,Ae,3,6,"ng-container",23),t.ɵɵtemplate(3,Ne,3,5,"ng-container",24),t.ɵɵelementContainerEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext(2).$implicit;t.ɵɵadvance(1),t.ɵɵproperty("ngSwitch",null==a?null:a.format),t.ɵɵadvance(1),t.ɵɵproperty("ngSwitchCase","image")}}function Te(e,n){if(1&e&&(t.ɵɵelementContainerStart(0,19),t.ɵɵtemplate(1,we,2,1,"th",13),t.ɵɵtemplate(2,Fe,4,2,"td",14),t.ɵɵelementContainerEnd()),2&e){var a=t.ɵɵnextContext().$implicit;t.ɵɵproperty("matColumnDef",null==a?null:a.id)}}function Le(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵtemplate(1,Te,3,1,"ng-container",18),t.ɵɵelementContainerEnd()),2&e){var a=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("ngIf","actions"!=(null==a?null:a.id)&&"entities"!=(null==a?null:a.id))}}function De(e,n){1&e&&(t.ɵɵelementStart(0,"th",20),t.ɵɵtext(1,"Manage"),t.ɵɵelementEnd())}function Oe(e,n){if(1&e&&(t.ɵɵelementStart(0,"button",30),t.ɵɵpipe(1,"async"),t.ɵɵtext(2),t.ɵɵpipe(3,"titlecase"),t.ɵɵelementEnd()),2&e){var a=n.$implicit,i=t.ɵɵnextContext().$implicit,r=t.ɵɵnextContext(3);t.ɵɵpropertyInterpolate3("routerLink","/",t.ɵɵpipeBind1(1,4,r.collectionName$),":",i.id,":",null==a?null:a.id,"/list"),t.ɵɵadvance(2),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,6,null==a?null:a.plural)," ")}}function Be(e,n){if(1&e&&(t.ɵɵelementStart(0,"td",21),t.ɵɵelementStart(1,"button",27),t.ɵɵtext(2,"More..."),t.ɵɵelementEnd(),t.ɵɵelementStart(3,"mat-menu",null,28),t.ɵɵtemplate(5,Oe,4,8,"button",29),t.ɵɵpipe(6,"async"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵreference(4),i=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵproperty("matMenuTriggerFor",a),t.ɵɵadvance(4),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(6,2,i.subCollections$))}}function je(e,n){1&e&&t.ɵɵelement(0,"th",20)}function _e(e,n){if(1&e){var a=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"td",21),t.ɵɵelementStart(1,"button",31),t.ɵɵpipe(2,"async"),t.ɵɵelementStart(3,"mat-icon"),t.ɵɵtext(4,"edit"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(5,"button",32),t.ɵɵlistener("click",(function(){t.ɵɵrestoreView(a);var e=n.$implicit;return t.ɵɵnextContext(3).delete(e)})),t.ɵɵelementStart(6,"mat-icon"),t.ɵɵtext(7,"delete"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementEnd()}if(2&e){var i=n.$implicit,r=t.ɵɵnextContext(3);t.ɵɵadvance(1),t.ɵɵpropertyInterpolate2("routerLink","/",t.ɵɵpipeBind1(2,2,r.collectionPath$),"/update/",i.id,"")}}function Pe(e,n){1&e&&t.ɵɵelement(0,"tr",33)}function Re(e,n){1&e&&t.ɵɵelement(0,"tr",34)}function Ve(e,n){if(1&e&&(t.ɵɵelementStart(0,"table",10),t.ɵɵpipe(1,"async"),t.ɵɵtemplate(2,Le,2,1,"ng-container",11),t.ɵɵpipe(3,"async"),t.ɵɵelementContainerStart(4,12),t.ɵɵtemplate(5,De,2,0,"th",13),t.ɵɵtemplate(6,Be,7,4,"td",14),t.ɵɵelementContainerEnd(),t.ɵɵelementContainerStart(7,15),t.ɵɵtemplate(8,je,1,0,"th",13),t.ɵɵtemplate(9,_e,8,4,"td",14),t.ɵɵelementContainerEnd(),t.ɵɵtemplate(10,Pe,1,0,"tr",16),t.ɵɵpipe(11,"async"),t.ɵɵtemplate(12,Re,1,0,"tr",17),t.ɵɵpipe(13,"async"),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext(2);t.ɵɵproperty("dataSource",t.ɵɵpipeBind1(1,4,a.list$)),t.ɵɵadvance(2),t.ɵɵproperty("ngForOf",t.ɵɵpipeBind1(3,6,a.displayedColumns$)),t.ɵɵadvance(8),t.ɵɵproperty("matHeaderRowDef",t.ɵɵpipeBind1(11,8,a.displayedColumnsNames$)),t.ɵɵadvance(2),t.ɵɵproperty("matRowDefColumns",t.ɵɵpipeBind1(13,10,a.displayedColumnsNames$))}}function qe(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-card"),t.ɵɵtext(1),t.ɵɵelementStart(2,"a",35),t.ɵɵpipe(3,"async"),t.ɵɵtext(4),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext().ngIf,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" No ",null==a?null:a.plural," added. "),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate1("routerLink","/",t.ɵɵpipeBind1(3,3,i.collectionPath$),"/add"),t.ɵɵadvance(2),t.ɵɵtextInterpolate1("Add ",null==a?null:a.single,"")}}function Ue(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelement(1,"mat-administration-breadcrumbs",5),t.ɵɵpipe(2,"async"),t.ɵɵelementStart(3,"mat-toolbar",6),t.ɵɵelementStart(4,"h1"),t.ɵɵtext(5),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"button",7),t.ɵɵpipe(7,"async"),t.ɵɵelementStart(8,"mat-icon"),t.ɵɵtext(9,"add"),t.ɵɵelementEnd(),t.ɵɵtext(10),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(11,Ve,14,12,"table",8),t.ɵɵpipe(12,"async"),t.ɵɵtemplate(13,qe,5,5,"mat-card",9),t.ɵɵpipe(14,"async"),t.ɵɵelementContainerEnd()),2&e){var a,i,r=n.ngIf,l=t.ɵɵnextContext(),o=null==(a=t.ɵɵpipeBind1(12,10,l.list$))?null:a.length,u=!(null!=(i=t.ɵɵpipeBind1(14,12,l.list$))&&i.length);t.ɵɵadvance(1),t.ɵɵproperty("collectionName",t.ɵɵpipeBind1(2,6,l.collectionName$)),t.ɵɵadvance(4),t.ɵɵtextInterpolate1("Manage ",null==r?null:r.plural,""),t.ɵɵadvance(1),t.ɵɵpropertyInterpolate1("routerLink","/",t.ɵɵpipeBind1(7,8,l.collectionPath$),"/add"),t.ɵɵadvance(4),t.ɵɵtextInterpolate1(" Add ",null==r?null:r.single," "),t.ɵɵadvance(1),t.ɵɵproperty("ngIf",o),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",u)}}function ze(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip-list"),t.ɵɵelementStart(1,"mat-chip",36),t.ɵɵtext(2,"No entity metadata defined for "),t.ɵɵelementStart(3,"strong"),t.ɵɵtext(4),t.ɵɵpipe(5,"async"),t.ɵɵelementEnd(),t.ɵɵtext(6,"!"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,1,a.collectionName$))}}var He=function(e){function n(t,n,i,r,l){var o=e.call(this,t,r,l)||this;return o.route=t,o.valueFormatService=n,o.snackbar=i,o.dataAdapterService=r,o.metadata=l,o.displayedColumns$=o.getDisplayedColumns(),o.displayedColumnsNames$=o.displayedColumns$.pipe(a.map((function(e){return e.map((function(e){return null==e?void 0:e.id}))}))),o.list$=o.collectionName$.pipe(a.switchMap((function(e){var t;return o.dataAdapterService.list(e,(null===(t=o.metadata$.getValue())||void 0===t?void 0:t.idField)||"id")})),a.tap((function(){return o.isLoading$.next(!1)})),a.shareReplay(1)),o}return z(n,e),n.prototype.getValue=function(e,t){var n=this;return this.metadata$.pipe(a.map((function(a){var i;return n.valueFormatService.transform(e[t],null===(i=null==a?void 0:a.fields[t])||void 0===i?void 0:i.type,null==a?void 0:a.fields[t])})))},n.prototype.delete=function(e){var t=this;this.isLoading$.next(!0),this.dataAdapterService.delete(this.collectionName$.getValue(),null==e?void 0:e.id).subscribe((function(){var e;return t.snackbar.success(i.capitalize(null===(e=t.metadata$.getValue())||void 0===e?void 0:e.single)+" added successfully!")}),(function(){var e;return t.snackbar.error("There was an error adding "+(null===(e=t.metadata$.getValue())||void 0===e?void 0:e.single)+"!")}),(function(){return t.isLoading$.next(!1)}))},n.prototype.getDisplayedColumns=function(){var e=this;return this.metadata$.pipe(a.withLatestFrom(this.subCollections$),a.map((function(t){var n=W(t,2),a=n[0],i=n[1],r=e.getDisplayableColumns(null==a?void 0:a.fields);return i&&r.push({id:"entities",label:"Manage"}),r.push({id:"actions",label:"Actions"}),r})),a.shareReplay(1))},n.prototype.getDisplayableColumns=function(e){var t=this;return e?Object.keys(i.pickBy(e,(function(e){return e&&!(null==e?void 0:e.hideInList)}))).map((function(n){var a,i;return H(H({},e[n]),{label:(null===(a=e[n])||void 0===a?void 0:a.label)||t.getFieldLabel({label:n}),id:(null===(i=e[n])||void 0===i?void 0:i.id)||n})})):[]},n.ɵfac=function(e){return new(e||n)(t.ɵɵdirectiveInject(r.ActivatedRoute),t.ɵɵdirectiveInject(Q),t.ɵɵdirectiveInject(K),t.ɵɵdirectiveInject(G),t.ɵɵdirectiveInject("MAT_ADMINISTRATION_METADATA",8))},n.ɵcmp=t.ɵɵdefineComponent({type:n,selectors:[["mat-administration-list"]],features:[t.ɵɵInheritDefinitionFeature],decls:6,vars:7,consts:[["class","loading-box-overflow",4,"ngIf"],[4,"ngIf","ngIfElse"],["noMetadata",""],[1,"loading-box-overflow"],["diameter","50"],["action","list",3,"collectionName"],[1,"justify-between"],["mat-raised-button","","color","primary",3,"routerLink"],["mat-table","","class","mat-elevation-z8",3,"dataSource",4,"ngIf"],[4,"ngIf"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],[4,"ngFor","ngForOf"],["matColumnDef","entities"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"matColumnDef",4,"ngIf"],[3,"matColumnDef"],["mat-header-cell",""],["mat-cell",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"list-image",3,"src","alt"],[3,"innerHTML"],["mat-raised-button","",3,"matMenuTriggerFor"],["entitiesMenu","matMenu"],["mat-menu-item","","aria-label","Manage",3,"routerLink",4,"ngFor","ngForOf"],["mat-menu-item","","aria-label","Manage",3,"routerLink"],["mat-icon-button","","aria-label","Edit",3,"routerLink"],["mat-icon-button","","color","warn","aria-label","Delete",3,"click"],["mat-header-row",""],["mat-row",""],["mat-button","","color","primary",3,"routerLink"],["color","warn"]],template:function(e,n){if(1&e&&(t.ɵɵtemplate(0,$e,2,0,"div",0),t.ɵɵpipe(1,"async"),t.ɵɵtemplate(2,Ue,15,14,"ng-container",1),t.ɵɵpipe(3,"async"),t.ɵɵtemplate(4,ze,7,3,"ng-template",null,2,t.ɵɵtemplateRefExtractor)),2&e){var a=t.ɵɵreference(5);t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(1,3,n.isLoading$)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(3,5,n.metadata$))("ngIfElse",a)}},directives:[p.NgIf,m.MatSpinner,te,g.MatToolbar,f.MatButton,r.RouterLink,v.MatIcon,T.MatTable,p.NgForOf,T.MatColumnDef,T.MatHeaderCellDef,T.MatCellDef,T.MatHeaderRowDef,T.MatRowDef,T.MatHeaderCell,T.MatCell,p.NgSwitch,p.NgSwitchCase,p.NgSwitchDefault,L.MatMenuTrigger,L._MatMenu,L.MatMenuItem,T.MatHeaderRow,T.MatRow,h.MatCard,f.MatAnchor,r.RouterLinkWithHref,F.MatChipList,F.MatChip],pipes:[p.AsyncPipe,p.TitleCasePipe],styles:["[_nghost-%COMP%]{position:relative;display:block}table[_ngcontent-%COMP%]{width:100%}.list-image[_ngcontent-%COMP%]{max-height:5rem;padding:1rem}.mat-column-id[_ngcontent-%COMP%]{max-width:2rem;overflow:hidden;text-overflow:ellipsis;padding-right:1rem}"]}),n}(J);function We(e,n){1&e&&(t.ɵɵelementStart(0,"div",3),t.ɵɵelement(1,"mat-spinner",4),t.ɵɵelementEnd())}function Ge(e,n){if(1&e&&(t.ɵɵelementStart(0,"a",12),t.ɵɵpipe(1,"async"),t.ɵɵpipe(2,"async"),t.ɵɵtext(3),t.ɵɵpipe(4,"titlecase"),t.ɵɵelementEnd()),2&e){var a=n.$implicit,i=t.ɵɵnextContext(3);t.ɵɵpropertyInterpolate3("routerLink","/",t.ɵɵpipeBind1(1,4,i.collectionName$),":",t.ɵɵpipeBind1(2,6,i.id$),":",null==a?null:a.id,"/list"),t.ɵɵadvance(3),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(4,8,null==a?null:a.plural)," ")}}function Je(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-toolbar"),t.ɵɵtemplate(1,Ge,5,10,"a",11),t.ɵɵelementEnd()),2&e){var a=n.ngIf;t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",a)}}function Ke(e,n){if(1&e){var a=t.ɵɵgetCurrentView();t.ɵɵelementStart(0,"mat-administration-form",13),t.ɵɵlistener("save",(function(e){return t.ɵɵrestoreView(a),t.ɵɵnextContext(2).save(e)})),t.ɵɵpipe(1,"async"),t.ɵɵelementEnd()}if(2&e){var i=t.ɵɵnextContext(2);t.ɵɵproperty("fields",t.ɵɵpipeBind1(1,1,i.fields$))}}function Qe(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelement(1,"mat-administration-breadcrumbs",5),t.ɵɵpipe(2,"async"),t.ɵɵelementStart(3,"mat-toolbar",6),t.ɵɵelementStart(4,"h1"),t.ɵɵtext(5),t.ɵɵelementEnd(),t.ɵɵelementStart(6,"span",7),t.ɵɵtext(7),t.ɵɵpipe(8,"async"),t.ɵɵelement(9,"br"),t.ɵɵelementStart(10,"small"),t.ɵɵtext(11),t.ɵɵpipe(12,"async"),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵelementStart(13,"a",8),t.ɵɵpipe(14,"async"),t.ɵɵelementStart(15,"mat-icon"),t.ɵɵtext(16,"keyboard_backspace"),t.ɵɵelementEnd(),t.ɵɵtext(17," Cancel "),t.ɵɵelementEnd(),t.ɵɵelementEnd(),t.ɵɵtemplate(18,Je,2,1,"mat-toolbar",9),t.ɵɵpipe(19,"async"),t.ɵɵelementStart(20,"mat-card"),t.ɵɵtemplate(21,Ke,2,3,"mat-administration-form",10),t.ɵɵpipe(22,"async"),t.ɵɵelementEnd(),t.ɵɵelementContainerEnd()),2&e){var a=n.ngIf,i=t.ɵɵnextContext();t.ɵɵadvance(1),t.ɵɵproperty("collectionName",t.ɵɵpipeBind1(2,7,i.collectionName$)),t.ɵɵadvance(4),t.ɵɵtextInterpolate1("Update ",null==a?null:a.single,""),t.ɵɵadvance(2),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(8,9,i.entityTitle$)),t.ɵɵadvance(4),t.ɵɵtextInterpolate1("#",t.ɵɵpipeBind1(12,11,i.id$),""),t.ɵɵadvance(2),t.ɵɵpropertyInterpolate1("routerLink","/",t.ɵɵpipeBind1(14,13,i.collectionPath$),"/list"),t.ɵɵadvance(5),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(19,15,i.subCollections$)),t.ɵɵadvance(3),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(22,17,i.fields$))}}function Xe(e,n){if(1&e&&(t.ɵɵelementStart(0,"mat-chip-list"),t.ɵɵelementStart(1,"mat-chip",14),t.ɵɵtext(2,"No entity metadata defined for "),t.ɵɵelementStart(3,"strong"),t.ɵɵtext(4),t.ɵɵpipe(5,"async"),t.ɵɵelementEnd(),t.ɵɵtext(6,"!"),t.ɵɵelementEnd(),t.ɵɵelementEnd()),2&e){var a=t.ɵɵnextContext();t.ɵɵadvance(4),t.ɵɵtextInterpolate(t.ɵɵpipeBind1(5,1,a.collectionName$))}}var Ye=function(e){function l(t,i,r,l,o){var u=e.call(this,t,l,o)||this;return u.route=t,u.snackbar=i,u.router=r,u.dataAdapterService=l,u.metadata=o,u.id$=new n.BehaviorSubject(null),u.route.params.pipe(a.map((function(e){return e.id})),a.takeUntil(u.destroyed$)).subscribe(u.id$),u.doc$=u.getDoc(),u.fields$=n.combineLatest([u.getFields(),u.doc$]).pipe(a.map((function(e){var t=W(e,2),n=t[0],a=t[1];return n.map((function(e){return H(H({},e),{value:u.getFieldValue(e,a)})}))}))),u.entityTitle$=u.doc$.pipe(a.map((function(e){var t;return null==e?void 0:e[(null===(t=u.metadata$.getValue())||void 0===t?void 0:t.titleField)||"title"]}))),u}return z(l,e),l.prototype.save=function(e){var t=this;this.isLoading$.next(!0),n.combineLatest([this.metadata$,this.collectionName$]).pipe(a.take(1),a.switchMap((function(n){var i=W(n,2),r=i[0],l=i[1];return t.processUploads(e,r,"update").pipe(a.map((function(e){return[r,l,e]})))})),a.switchMap((function(e){var n=W(e,3),a=(n[0],n[1]),i=n[2];return t.dataAdapterService.update(a,t.id$.getValue(),t.getWithTimestamps(i,"update"))}))).subscribe((function(){var e;t.snackbar.success(i.capitalize(null===(e=t.metadata$.getValue())||void 0===e?void 0:e.single)+" updated successfully!"),t.router.navigate(["/"+t.collectionPath$.getValue()+"/list"])}),(function(){var e;return t.snackbar.error("There was an error updating "+(null===(e=t.metadata$.getValue())||void 0===e?void 0:e.single)+"!")}),(function(){return t.isLoading$.next(!1)}))},l.prototype.getDoc=function(){var e=this;return this.dataAdapterService.get(this.collectionName$.getValue(),this.id$.getValue()).pipe(a.tap((function(){return e.isLoading$.next(!1)})),a.shareReplay(1))},l.prototype.getFieldValue=function(e,t){var n;return"timestamp"===(null==e?void 0:e.type)?null===(n=null==t?void 0:t[null==e?void 0:e.name])||void 0===n?void 0:n.toDate():null==t?void 0:t[null==e?void 0:e.name]},l.ɵfac=function(e){return new(e||l)(t.ɵɵdirectiveInject(r.ActivatedRoute),t.ɵɵdirectiveInject(K),t.ɵɵdirectiveInject(r.Router),t.ɵɵdirectiveInject(G),t.ɵɵdirectiveInject("MAT_ADMINISTRATION_METADATA",8))},l.ɵcmp=t.ɵɵdefineComponent({type:l,selectors:[["mat-administration-update"]],features:[t.ɵɵInheritDefinitionFeature],decls:6,vars:7,consts:[["class","loading-box-overflow",4,"ngIf"],[4,"ngIf","ngIfElse"],["noMetadata",""],[1,"loading-box-overflow"],["diameter","50"],["action","update",3,"collectionName"],[1,"justify-between","toolbar-main"],[1,"entity-title"],["mat-raised-button","","color","warn",3,"routerLink"],[4,"ngIf"],[3,"fields","save",4,"ngIf"],["mat-raised-button","","aria-label","Manage",3,"routerLink",4,"ngFor","ngForOf"],["mat-raised-button","","aria-label","Manage",3,"routerLink"],[3,"fields","save"],["color","warn"]],template:function(e,n){if(1&e&&(t.ɵɵtemplate(0,We,2,0,"div",0),t.ɵɵpipe(1,"async"),t.ɵɵtemplate(2,Qe,23,19,"ng-container",1),t.ɵɵpipe(3,"async"),t.ɵɵtemplate(4,Xe,7,3,"ng-template",null,2,t.ɵɵtemplateRefExtractor)),2&e){var a=t.ɵɵreference(5);t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(1,3,n.isLoading$)),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",t.ɵɵpipeBind1(3,5,n.metadata$))("ngIfElse",a)}},directives:[p.NgIf,m.MatSpinner,te,g.MatToolbar,f.MatAnchor,r.RouterLinkWithHref,v.MatIcon,h.MatCard,p.NgForOf,be,F.MatChipList,F.MatChip],pipes:[p.AsyncPipe,p.TitleCasePipe],styles:[".entity-title[_ngcontent-%COMP%]{font-size:1rem;line-height:1rem}.entity-title[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{font-weight:400}.toolbar-main[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.12)}"]}),l}(J);function Ze(e,n){1&e&&t.ɵɵelement(0,"mat-divider")}function et(e,n){if(1&e&&(t.ɵɵelementContainerStart(0),t.ɵɵelementStart(1,"a",2),t.ɵɵtext(2),t.ɵɵpipe(3,"titlecase"),t.ɵɵelementEnd(),t.ɵɵtemplate(4,Ze,1,0,"mat-divider",3),t.ɵɵelementContainerEnd()),2&e){var a=n.$implicit;t.ɵɵadvance(1),t.ɵɵproperty("routerLink",a.id),t.ɵɵadvance(1),t.ɵɵtextInterpolate1(" ",t.ɵɵpipeBind1(3,3,a.plural)," "),t.ɵɵadvance(2),t.ɵɵproperty("ngIf",null==a?null:a.showMenuDividerAfter)}}var tt=function(){function e(e){var t,n=this;this.metadata=e,this.entities=Object.keys(null===(t=this.metadata)||void 0===t?void 0:t.entities).filter((function(e){var t;return!(null===(t=n.metadata.entities[e])||void 0===t?void 0:t.hideList)})).map((function(e){return H({id:e},n.metadata.entities[e])}))}return e.ɵfac=function(n){return new(n||e)(t.ɵɵdirectiveInject("MAT_ADMINISTRATION_METADATA",8))},e.ɵcmp=t.ɵɵdefineComponent({type:e,selectors:[["mat-administration-menu"]],decls:2,vars:1,consts:[["color","primary"],[4,"ngFor","ngForOf"],["mat-list-item","","color","primary","routerLinkActive","active",3,"routerLink"],[4,"ngIf"]],template:function(e,n){1&e&&(t.ɵɵelementStart(0,"mat-nav-list",0),t.ɵɵtemplate(1,et,5,5,"ng-container",1),t.ɵɵelementEnd()),2&e&&(t.ɵɵadvance(1),t.ɵɵproperty("ngForOf",n.entities))},directives:[D.MatNavList,p.NgForOf,D.MatListItem,r.RouterLinkWithHref,r.RouterLinkActive,p.NgIf,O.MatDivider],pipes:[p.TitleCasePipe],styles:[".active[_ngcontent-%COMP%]{color:#fff!important;background-color:#000!important}"]}),e}(),nt=function(){function e(){}return e.forRoot=function(t,n){return void 0===n&&(n=function(){}),{ngModule:e,providers:[{provide:j.FIREBASE_OPTIONS,useValue:t},{provide:j.FIREBASE_APP_NAME,useFactory:n},Q]}},e.ɵmod=t.ɵɵdefineNgModule({type:e}),e.ɵinj=t.ɵɵdefineInjector({factory:function(t){return new(t||e)},providers:[Q,p.DatePipe],imports:[[p.CommonModule,F.MatChipsModule,h.MatCardModule,v.MatIconModule,g.MatToolbarModule,r.RouterModule,m.MatProgressSpinnerModule,B.CdkTableModule,T.MatTableModule,y.FormsModule,y.ReactiveFormsModule,C.MatFormFieldModule,N.MatFileInputModule,f.MatButtonModule,b.CKEditorModule,S.MatInputModule,I.MatSelectModule,k.MatRadioModule,w.MatCheckboxModule,A.MatSlideToggleModule,$.MatDatepickerModule,c.MatSnackBarModule,E.MatNativeDateModule,P.MatPaginatorModule,R.MatSortModule,u.AngularFirestoreModule,d.AngularFireStorageModule,_.FlexLayoutModule,L.MatMenuModule,V.MatSidenavModule,D.MatListModule],r.RouterModule,q.BrowserAnimationsModule,u.AngularFirestoreModule,d.AngularFireStorageModule]}),e}();("undefined"==typeof ngJitMode||ngJitMode)&&t.ɵɵsetNgModuleScope(nt,{declarations:[He,ke,Ye,J,be,te,tt],imports:[p.CommonModule,F.MatChipsModule,h.MatCardModule,v.MatIconModule,g.MatToolbarModule,r.RouterModule,m.MatProgressSpinnerModule,B.CdkTableModule,T.MatTableModule,y.FormsModule,y.ReactiveFormsModule,C.MatFormFieldModule,N.MatFileInputModule,f.MatButtonModule,b.CKEditorModule,S.MatInputModule,I.MatSelectModule,k.MatRadioModule,w.MatCheckboxModule,A.MatSlideToggleModule,$.MatDatepickerModule,c.MatSnackBarModule,E.MatNativeDateModule,P.MatPaginatorModule,R.MatSortModule,u.AngularFirestoreModule,d.AngularFireStorageModule,_.FlexLayoutModule,L.MatMenuModule,V.MatSidenavModule,D.MatListModule],exports:[He,ke,Ye,J,be,tt,te,r.RouterModule,q.BrowserAnimationsModule,u.AngularFirestoreModule,d.AngularFireStorageModule]});var at=[{path:":collection/list",component:He},{path:":collection/add",component:ke},{path:":collection/update/:id",component:Ye},{path:":collection",redirectTo:":collection/list"}];e.AddComponent=ke,e.BreadcrumbsComponent=te,e.DataAdapterService=G,e.FormComponent=be,e.ListComponent=He,e.MaterialAdministrationModule=nt,e.MenuComponent=tt,e.MetadataComponent=J,e.SnackbarService=K,e.UpdateComponent=Ye,e.ValueFormatService=Q,e.materialAdministrationRoutes=at,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=material-administration.umd.min.js.map