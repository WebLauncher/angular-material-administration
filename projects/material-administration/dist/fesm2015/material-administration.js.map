{"version":3,"file":"material-administration.js","sources":["ng://material-administration/lib/services/data-adapter.service.ts","ng://material-administration/lib/components/metadata/metadata.component.ts","ng://material-administration/lib/components/metadata/metadata.component.html","ng://material-administration/lib/services/snackbar.service.ts","ng://material-administration/lib/services/value-format.service.ts","ng://material-administration/lib/components/breadcrumbs/breadcrumbs.component.html","ng://material-administration/lib/components/breadcrumbs/breadcrumbs.component.ts","ng://material-administration/lib/components/form/form.component.html","ng://material-administration/lib/components/form/form.component.ts","ng://material-administration/lib/components/add/add.component.html","ng://material-administration/lib/components/add/add.component.ts","ng://material-administration/lib/components/list/list.component.html","ng://material-administration/lib/components/list/list.component.ts","ng://material-administration/lib/components/update/update.component.html","ng://material-administration/lib/components/update/update.component.ts","ng://material-administration/lib/components/menu/menu.component.html","ng://material-administration/lib/components/menu/menu.component.ts","ng://material-administration/lib/material-administration.module.ts","ng://material-administration/lib/material-administration.routes.ts","ng://material-administration/public-api.ts","ng://material-administration/material-administration.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { AngularFirestore } from '@angular/fire/firestore';\r\nimport { DataAdapterInterface, DownloadData } from './data-adapter';\r\nimport { from, Subject, Observable } from 'rxjs';\r\nimport * as firebase from 'firebase/app';\r\nimport { AngularFireStorage } from '@angular/fire/storage';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { finalize, filter } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class DataAdapterService implements DataAdapterInterface {\r\n  constructor(\r\n    private db: AngularFirestore,\r\n    private storage: AngularFireStorage\r\n  ) { }\r\n\r\n  get(collection: string, id: string) {\r\n    return this.db.collection(collection).doc(id).valueChanges();\r\n  }\r\n\r\n  list(collection: string, idField: string) {\r\n    return this.db.collection(collection).valueChanges({ idField });\r\n  }\r\n\r\n  add(collection: string, item: any) {\r\n    return from(this.db.collection(collection).add(item));\r\n  }\r\n\r\n  update(collection: string, id: string, item: any) {\r\n    return from(this.db.collection(collection).doc(id).update(item));\r\n  }\r\n\r\n  delete(collection: string, id: string) {\r\n    return from(this.db.collection(collection).doc(id).delete());\r\n  }\r\n\r\n  upload(file: File): Observable<DownloadData> {\r\n    const path = uuidv4() + '_' + file?.name;\r\n    const fileRef = this.storage.ref(path);\r\n    const task = this.storage.upload(path, file);\r\n    const downloadData$ = new Subject<DownloadData>();\r\n\r\n    task.snapshotChanges().pipe(\r\n      finalize(() => {\r\n        fileRef.getDownloadURL().subscribe(downloadUrl => {\r\n          downloadData$.next({\r\n            downloadUrl,\r\n            path\r\n          });\r\n          downloadData$.complete();\r\n        });\r\n      })\r\n    ).subscribe();\r\n\r\n    return downloadData$.pipe(filter(Boolean)) as Observable<DownloadData>;\r\n  }\r\n\r\n  removeUpload(filePath: string) {\r\n    return this.storage.ref(filePath).delete();\r\n  }\r\n\r\n  getTimestamp() {\r\n    return firebase.firestore.FieldValue.serverTimestamp();\r\n  }\r\n}\r\n","import { Component, OnDestroy, Optional, Inject } from '@angular/core';\r\nimport { BehaviorSubject, of, forkJoin, Subject, Observable } from 'rxjs';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { map, shareReplay, switchMap, take, catchError, takeUntil, tap } from 'rxjs/operators';\r\nimport { capitalize } from 'lodash';\r\nimport { DataAdapterService } from '../../services/data-adapter.service';\r\nimport { DownloadData } from '../../services';\r\nimport { MatAdministrationEntity } from '../../types/material-administration-metadata';\r\n\r\n@Component({\r\n  selector: 'mat-administration-metadata',\r\n  templateUrl: './metadata.component.html',\r\n  styleUrls: ['./metadata.component.scss']\r\n})\r\nexport class MetadataComponent implements OnDestroy {\r\n  metadata$: BehaviorSubject<any> = new BehaviorSubject(null);\r\n  collectionPath$: BehaviorSubject<string> = new BehaviorSubject(null);\r\n  collectionName$: BehaviorSubject<string> = new BehaviorSubject(null);\r\n  subCollections$: BehaviorSubject<MatAdministrationEntity[]> = new BehaviorSubject(null);\r\n  isLoading$: BehaviorSubject<boolean> = new BehaviorSubject(true);\r\n  destroyed$ = new Subject();\r\n\r\n  constructor(\r\n    public route: ActivatedRoute,\r\n    public dataAdapterService: DataAdapterService,\r\n    @Optional() @Inject('MAT_ADMINISTRATION_METADATA') public metadata: any\r\n  ) {\r\n    this.route.params.pipe(\r\n      map(params => params?.collection),\r\n      tap(() => this.isLoading$.next(true)),\r\n      takeUntil(this.destroyed$)\r\n    )\r\n      .subscribe(this.collectionPath$);\r\n\r\n    this.collectionPath$.pipe(\r\n      map(collectionPath => collectionPath.replace(/\\:/gi, '\\/')),\r\n      shareReplay(1)\r\n    )\r\n      .subscribe(this.collectionName$);\r\n\r\n    this.collectionName$.pipe(\r\n      map(name => this.getMetadata(name, metadata)),\r\n      shareReplay(1)\r\n    ).subscribe(this.metadata$);\r\n\r\n    this.metadata$.pipe(\r\n      map(metadata => {\r\n        if (!metadata?.entities) {\r\n          return null;\r\n        }\r\n\r\n        return Object.keys(metadata.entities).map(key => {\r\n          return {\r\n            id: key,\r\n            ...metadata.entities[key]\r\n          };\r\n        });\r\n      })\r\n    ).subscribe(this.subCollections$);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroyed$.next();\r\n    this.destroyed$.complete();\r\n  }\r\n\r\n  getFieldLabel(field: any): string {\r\n    if (typeof field === 'string') {\r\n      return capitalize(field);\r\n    }\r\n\r\n    return capitalize(field?.label);\r\n  }\r\n\r\n  getFields() {\r\n    return this.metadata$.pipe(\r\n      map(metadata => {\r\n        const entries = Object.entries(metadata?.fields);\r\n\r\n        return entries\r\n          .map(\r\n            ([key, value]) => typeof value === 'object' ?\r\n              { ...value, name: key, label: ((value as any)?.label || this.getFieldLabel(key)) } :\r\n              { name: key, label: this.getFieldLabel(key) }\r\n          )\r\n          .filter(field => this.showField(metadata, field));\r\n      }),\r\n      switchMap(fields => forkJoin(fields.map(field => this.addAdditionalMetadata(field)))),\r\n      catchError(error => {\r\n        console.error(error);\r\n\r\n        return of([]);\r\n      }),\r\n      shareReplay(1)\r\n    );\r\n  }\r\n\r\n  processUploads(item, metadata, action: 'add' | 'update') {\r\n    const filesKeys = Object.keys(item)\r\n      .filter(key => Array.isArray(item[key]) && item[key][0] instanceof File);\r\n\r\n    if (filesKeys.length) {\r\n      const itemUpdates = {};\r\n\r\n      return forkJoin(filesKeys.map(key => {\r\n        return this.dataAdapterService.upload(item[key][0]).pipe(\r\n          map(downloadData => {\r\n            return { key, downloadData };\r\n          }),\r\n          catchError(error => {\r\n            console.error(error);\r\n\r\n            return of(null);\r\n          })\r\n        ) as Observable<{ key: string, downloadData: DownloadData }>;\r\n      })).pipe(\r\n        map((uploadedFiles) => {\r\n          if (uploadedFiles) {\r\n            uploadedFiles.forEach(uploadedFile => {\r\n              itemUpdates[uploadedFile?.key] = uploadedFile?.downloadData?.downloadUrl;\r\n              itemUpdates[uploadedFile?.key + 'Path'] = uploadedFile?.downloadData?.path;\r\n            });\r\n          }\r\n\r\n          return {\r\n            ...item,\r\n            ...itemUpdates\r\n          };\r\n        })\r\n      );\r\n    }\r\n\r\n    return of(item);\r\n  }\r\n\r\n  getWithTimestamps(item, action: 'add' | 'update') {\r\n    const newItem = { ...item };\r\n\r\n    const timestamp = this.dataAdapterService.getTimestamp();\r\n    if (action === 'add' && this.metadata$.getValue()?.createdTimestamp) {\r\n      newItem[this.metadata$.getValue()?.createdTimestamp] = timestamp;\r\n    }\r\n    if (this.metadata$.getValue()?.updatedTimestamp) {\r\n      newItem[this.metadata$.getValue()?.updatedTimestamp] = timestamp;\r\n    }\r\n\r\n    return newItem;\r\n  }\r\n\r\n  getFieldMedatada(field: string) {\r\n    return this.metadata$.getValue()?.entities?.[field];\r\n  }\r\n\r\n  private getMetadata(collectionName: string, metadata: any) {\r\n    const nameParts = collectionName.split('/');\r\n\r\n    if (nameParts.length === 1) {\r\n      return metadata.entities[nameParts[0]] || null;\r\n    }\r\n\r\n    return this.getMetadata(nameParts.slice(2).join('/'), metadata.entities[nameParts[0]]);\r\n  }\r\n\r\n  private addAdditionalMetadata(field) {\r\n    if ((field?.inputType === 'select' || field?.inputType === 'radio') && field?.data?.type === 'collection') {\r\n      return this.dataAdapterService.list(field?.data?.collection, field?.data?.collectionValue)\r\n        .pipe(\r\n          take(1),\r\n          map(docs => {\r\n            return {\r\n              ...field,\r\n              options: docs.map(doc => {\r\n                return {\r\n                  value: doc[field?.data?.collectionValue],\r\n                  label: doc[field?.data?.collectionLabel]\r\n                };\r\n              })\r\n            };\r\n          })\r\n        );\r\n    }\r\n\r\n    return of(field);\r\n  }\r\n\r\n  private showField(metadata, field) {\r\n    return field.name !== 'id' &&\r\n      (!metadata?.createdTimestamp || metadata?.createdTimestamp !== field.name) &&\r\n      (!metadata?.updatedTimestamp || metadata?.updatedTimestamp !== field.name);\r\n  }\r\n}\r\n","<p>metadata works!</p>\n","import { Injectable } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class SnackbarService {\n\n  constructor(\n    private snackbar: MatSnackBar\n  ) { }\n\n  error(message) {\n    this.snackbar.open(message,  'Close', {\n      duration: 3000,\n      panelClass: 'snackbar-error'\n    });\n  }\n\n  success(message) {\n    this.snackbar.open(message,  'Close', {\n      duration: 3000,\n      panelClass: 'snackbar-success'\n    });\n  }\n}\n","import { Injectable, Optional, Inject } from '@angular/core';\nimport { DatePipe } from '@angular/common';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ValueFormatService {\n  constructor(\n    private datePipe: DatePipe,\n    @Optional() @Inject('MAT_ADMINISTRATION_METADATA') private metadata: any\n  ) { }\n\n  transform(value: any, type: string, options = null) {\n    switch (type) {\n      case 'timestamp':\n        return this.datePipe.transform(\n          value?.toDate(),\n          options?.format || this.metadata?.timestampFormat,\n          options.timezone,\n          options?.locale\n        );\n      default:\n        return value;\n    }\n  }\n}\n","<div fxLayout=\"row\"\r\n     fxAlign=\"start\">\r\n  <ng-container *ngFor=\"let item of links$ | async; let last = last\">\r\n    <div fxLayout=\"row\"\r\n         fxLayoutAlign=\"start center\">\r\n      <a mat-button\r\n         [routerLink]=\"item.url\">\r\n        <ng-container *ngIf=\"item.source\">\r\n          {{(item.source | async)}}\r\n        </ng-container>\r\n        <ng-container *ngIf=\"!item.source\">\r\n          {{item.name}}\r\n        </ng-container>\r\n      </a>\r\n      <mat-icon *ngIf=\"!last\">arrow_right</mat-icon>\r\n    </div>\r\n  </ng-container>\r\n</div>\r\n","import { Component, OnInit, Input, Optional, Inject } from '@angular/core';\r\nimport { BehaviorSubject, Observable } from 'rxjs';\r\nimport { MatAdministrationEntity, MatAdministrationMetadata } from '../../types';\r\nimport { capitalize } from 'lodash';\r\nimport { map } from 'rxjs/operators';\r\nimport { DataAdapterService } from '../../services';\r\n\r\n@Component({\r\n  selector: 'mat-administration-breadcrumbs',\r\n  templateUrl: './breadcrumbs.component.html',\r\n  styleUrls: ['./breadcrumbs.component.css']\r\n})\r\nexport class BreadcrumbsComponent implements OnInit {\r\n  @Input() set collectionName(value: string) {\r\n    this.collectionName$.next(value);\r\n  }\r\n  get collectionName() {\r\n    return this.collectionName$.getValue();\r\n  }\r\n\r\n  @Input() action: 'add' | 'update' | 'list';\r\n\r\n  links$: Observable<any>;\r\n\r\n  private collectionName$ = new BehaviorSubject('');\r\n\r\n  constructor(\r\n    @Optional() @Inject('MAT_ADMINISTRATION_METADATA') public metadata: MatAdministrationMetadata,\r\n    public dataAdapterService: DataAdapterService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.links$ = this.collectionName$.pipe(\r\n      map(collectionName => {\r\n        const parts = collectionName.split('/');\r\n        return this.getLinks(parts, this.metadata.entities[parts[0]]);\r\n      })\r\n    );\r\n  }\r\n\r\n  private getLinks(parts: string[], metadata: Partial<MatAdministrationEntity>, url = '/') {\r\n    if (parts.length === 1) {\r\n      return this.getPartUrls(parts[0], metadata, url, this.action);\r\n    }\r\n\r\n    return [\r\n      ...this.getPartUrls(parts[0], metadata, url, 'list'),\r\n      this.getItemUrl(parts[0], parts[1], metadata, url),\r\n      ...this.getLinks(parts.slice(2), metadata.entities[parts[2]], `${url}${parts[0]}:${parts[1]}:`)\r\n    ];\r\n  }\r\n\r\n  private getItemUrl(collection, itemId, metadata, baseUrl) {\r\n    return {\r\n      name: metadata.titleField || 'title',\r\n      source: this.dataAdapterService.get(collection, itemId).pipe(map(data => data?.[metadata.titleField || 'title'])),\r\n      url: [`${baseUrl}${collection}/update/${itemId}`]\r\n    };\r\n  }\r\n\r\n  private getPartUrls(part, metadata, baseUrl = '', action = 'list', itemId = '') {\r\n    if (action === 'list') {\r\n      return [{\r\n        name: capitalize(metadata.plural),\r\n        url: [`${baseUrl}${part}/list`]\r\n      }];\r\n    }\r\n\r\n    if (action === 'add') {\r\n      return [\r\n        {\r\n          name: capitalize(metadata.plural),\r\n          url: [`${baseUrl}${part}/list`]\r\n        },\r\n        {\r\n          name: `Add ${metadata.single}`,\r\n          url: null\r\n        }\r\n      ];\r\n    }\r\n\r\n    if (action === 'update') {\r\n      return [\r\n        {\r\n          name: capitalize(metadata.plural),\r\n          url: [`${baseUrl}${part}/list`]\r\n        },\r\n        {\r\n          name: `Update ${metadata.single}`,\r\n          url: null\r\n        }\r\n      ];\r\n    }\r\n  }\r\n}\r\n","<form [formGroup]=\"form\"\r\n      (ngSubmit)=\"submit()\">\r\n  <ng-container *ngIf=\"fields\">\r\n\r\n    <div *ngFor=\"let field of fields\">\r\n      <ng-container *ngTemplateOutlet=\"formField; context: {field: field}\"></ng-container>\r\n    </div>\r\n    <div class=\"flex justify-end\">\r\n      <button mat-raised-button\r\n              color=\"primary\"\r\n              type=\"submit\">Save\r\n      </button>\r\n    </div>\r\n  </ng-container>\r\n\r\n  <ng-template #formField\r\n               let-field=\"field\">\r\n    <div class=\"form-field-container\" [ngStyle]=\"field?.style?.form\">\r\n      <ng-container [ngSwitch]=\"field?.inputType\">\r\n        <!-- ckeditor -->\r\n        <div *ngSwitchCase=\"'ckeditor'\"\r\n             class=\"ckeditor\">\r\n          <label>{{field?.label}}</label>\r\n          <ckeditor [formControlName]=\"field?.name\"\r\n                    [editor]=\"Editor\"></ckeditor>\r\n        </div>\r\n        <!-- textarea -->\r\n        <mat-form-field *ngSwitchCase=\"'textarea'\">\r\n          <mat-label>{{field?.label}}</mat-label>\r\n          <textarea matInput\r\n                    [formControlName]=\"field?.name\"></textarea>\r\n        </mat-form-field>\r\n        <!-- select -->\r\n        <mat-form-field *ngSwitchCase=\"'select'\">\r\n          <mat-label>{{field?.label}}</mat-label>\r\n          <mat-select [formControlName]=\"field?.name\">\r\n            <mat-option *ngFor=\"let option of field?.options\"\r\n                        [value]=\"option?.value\">\r\n              {{option?.label}}\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n        <!-- radio -->\r\n        <div *ngSwitchCase=\"'radio'\"\r\n             class=\"radio\">\r\n          <mat-label>{{field?.label}}:</mat-label>\r\n          <mat-radio-group [formControlName]=\"field?.name\"\r\n                           color=\"primary\">\r\n            <mat-radio-button *ngFor=\"let option of field?.options\"\r\n                              [value]=\"option?.value\">{{option?.label}}</mat-radio-button>\r\n          </mat-radio-group>\r\n        </div>\r\n        <!-- datepicker -->\r\n        <mat-form-field *ngSwitchCase=\"'datepicker'\">\r\n          <mat-label>{{field?.label}}</mat-label>\r\n          <input matInput\r\n                 [formControlName]=\"field?.name\"\r\n                 [matDatepicker]=\"picker\">\r\n          <mat-datepicker-toggle matSuffix\r\n                                 [for]=\"picker\"></mat-datepicker-toggle>\r\n          <mat-datepicker touchUi\r\n                          #picker></mat-datepicker>\r\n        </mat-form-field>\r\n        <!-- checkbox -->\r\n        <div *ngSwitchCase=\"'checkbox'\"\r\n             class=\"checkbox\">\r\n          <mat-checkbox [formControlName]=\"field?.name\"\r\n                        color=\"primary\"\r\n                        [value]=\"true\">{{field?.label}}</mat-checkbox>\r\n        </div>\r\n        <!-- slide togle -->\r\n        <div *ngSwitchCase=\"'toggle'\"\r\n             class=\"checkbox\">\r\n          <mat-slide-toggle color=\"primary\"\r\n                            [formControlName]=\"field?.name\">\r\n            {{field?.label}}\r\n          </mat-slide-toggle>\r\n        </div>\r\n        <!-- file upload -->\r\n        <mat-form-field *ngSwitchCase=\"'file'\">\r\n          <mat-label>{{field?.label}}</mat-label>\r\n          <mat-file-input [formControlName]=\"field?.name\"\r\n                          [placeholder]=\"field?.placeholder\"></mat-file-input>\r\n        </mat-form-field>\r\n        <!-- image upload -->\r\n        <div *ngSwitchCase=\"'image'\">\r\n          <div *ngIf=\"field?.value\">\r\n            <mat-label>{{field?.label}}</mat-label>\r\n            <div fxLayout=\"row\"\r\n                 fxLayoutAlign=\"start\">\r\n              <img class=\"file-input-image\"\r\n                   [src]=\"field?.value\"\r\n                   alt=\"field?.label\" />\r\n              <button type=\"button\"\r\n                      mat-raised-button\r\n                      (click)=\"removeImage(field)\">Remove</button>\r\n            </div>\r\n          </div>\r\n\r\n          <mat-form-field *ngIf=\"!field?.value\">\r\n            <mat-label>{{field?.label}}</mat-label>\r\n            <mat-file-input [formControlName]=\"field?.name\"\r\n                            [placeholder]=\"field?.placeholder\"></mat-file-input>\r\n\r\n          </mat-form-field>\r\n        </div>\r\n        <!-- text input -->\r\n        <mat-form-field *ngSwitchDefault>\r\n          <mat-label>{{field?.label}}</mat-label>\r\n          <input matInput\r\n                 [formControlName]=\"field?.name\"\r\n                 [placeholder]=\"field?.placeholder\">\r\n        </mat-form-field>\r\n      </ng-container>\r\n    </div>\r\n  </ng-template>\r\n\r\n</form>\r\n","import { Component, OnInit, ChangeDetectionStrategy, Input, Output, EventEmitter, OnDestroy } from '@angular/core';\r\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\r\nimport { takeUntil, tap } from 'rxjs/operators';\r\nimport { Subject } from 'rxjs';\r\nimport * as ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\n\r\n@Component({\r\n  selector: 'mat-administration-form',\r\n  templateUrl: './form.component.html',\r\n  styleUrls: ['./form.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class FormComponent implements OnInit, OnDestroy {\r\n  @Input() fields: any[];\r\n  @Output() save: EventEmitter<any> = new EventEmitter();\r\n  @Output() valueChanges: EventEmitter<any> = new EventEmitter();\r\n\r\n  form: FormGroup;\r\n  Editor = ClassicEditor;\r\n\r\n  private destroyed$: Subject<void> = new Subject();\r\n\r\n  constructor(\r\n    private formBuilder: FormBuilder\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    if (this.fields) {\r\n      this.form = this.formBuilder.group(\r\n        this.fields?.reduce((prev, cur) => {\r\n          return { ...prev, [cur?.name]: [this.getFieldValue(cur), this.getFieldValidators(cur)] };\r\n        }, {})\r\n      );\r\n\r\n      this.form.valueChanges.pipe(\r\n        takeUntil(this.destroyed$)\r\n      ).subscribe(this.valueChanges);\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.destroyed$.next();\r\n    this.destroyed$.complete();\r\n  }\r\n\r\n  submit() {\r\n    if (this.form.valid) {\r\n      this.save.emit(this.form.value);\r\n    }\r\n  }\r\n\r\n  removeImage(field) {\r\n    field.value = null;\r\n    this.form.get(field.name).setValue(null);\r\n  }\r\n\r\n  private getFieldValue(field) {\r\n    return field?.value;\r\n  }\r\n\r\n  private getFieldValidators(field) {\r\n    return [Validators.required];\r\n  }\r\n}\r\n","<div class=\"loading-box-overflow\"\r\n     *ngIf=\"isLoading$ | async\">\r\n  <mat-spinner diameter=\"50\"></mat-spinner>\r\n</div>\r\n<ng-container *ngIf=\"metadata$ | async as metadata; else noMetadata\">\r\n  <mat-administration-breadcrumbs [collectionName]=\"collectionName$ | async\"\r\n                                  action=\"add\"></mat-administration-breadcrumbs>\r\n  <mat-toolbar class=\"justify-between\">\r\n    <h1>Add {{metadata?.single}}</h1>\r\n    <a mat-raised-button\r\n       color=\"warn\"\r\n       routerLink=\"/{{collectionPath$ | async}}/list\">\r\n      <mat-icon>keyboard_backspace</mat-icon> Cancel\r\n    </a>\r\n  </mat-toolbar>\r\n  <mat-card>\r\n    <mat-administration-form [fields]=\"fields$ | async\"\r\n                             *ngIf=\"fields$ | async\"\r\n                             (save)=\"save($event);\"></mat-administration-form>\r\n  </mat-card>\r\n</ng-container>\r\n\r\n<ng-template #noMetadata>\r\n  <mat-chip-list>\r\n    <mat-chip color=\"warn\">No entity metadata defined for&nbsp;<strong>{{collectionName$ | async}}</strong>!</mat-chip>\r\n  </mat-chip-list>\r\n</ng-template>\r\n","import { Component, Inject, Optional } from '@angular/core';\r\nimport { MetadataComponent } from '../metadata/metadata.component';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Observable, combineLatest } from 'rxjs';\r\nimport { take, tap, switchMap, map } from 'rxjs/operators';\r\nimport { SnackbarService } from '../../services/snackbar.service';\r\nimport { capitalize } from 'lodash';\r\nimport { DataAdapterService } from '../../services/data-adapter.service';\r\nimport { Immutable } from 'types/immutable';\r\n\r\n@Component({\r\n  selector: 'mat-administration-add',\r\n  templateUrl: './add.component.html',\r\n  styleUrls: ['./add.component.scss']\r\n})\r\nexport class AddComponent extends MetadataComponent {\r\n  fields$: Observable<any[]>;\r\n\r\n  constructor(\r\n    public route: ActivatedRoute,\r\n    private snackbar: SnackbarService,\r\n    private router: Router,\r\n    public dataAdapterService: DataAdapterService,\r\n    @Optional() @Inject('MAT_ADMINISTRATION_METADATA') public metadata: Immutable<any>\r\n  ) {\r\n    super(route, dataAdapterService, metadata);\r\n\r\n    this.fields$ = this.getFields().pipe(tap(() => { this.isLoading$.next(false); }));\r\n  }\r\n\r\n  save(item: any) {\r\n    this.isLoading$.next(true);\r\n    combineLatest([\r\n      this.metadata$,\r\n      this.collectionName$\r\n    ])\r\n      .pipe(\r\n        take(1),\r\n        switchMap(([metadata, collectionName]) => {\r\n          return this.processUploads(item, metadata, 'add').pipe(map(updatedItem => {\r\n            return [\r\n              metadata,\r\n              collectionName,\r\n              updatedItem\r\n            ];\r\n          }));\r\n        }),\r\n        switchMap(([_, collectionName, updatedItem]) =>\r\n          this.dataAdapterService.add(collectionName, this.getWithTimestamps(updatedItem, 'add'))\r\n        )\r\n      ).subscribe(\r\n        () => {\r\n          this.snackbar.success(`${capitalize(this.metadata$.getValue()?.single)} added successfully!`);\r\n          this.router.navigate([`/${this.collectionPath$.getValue()}/list`]);\r\n        },\r\n        () => this.snackbar.error(`There was an error adding ${this.metadata$.getValue()?.single}!`),\r\n        () => this.isLoading$.next(false)\r\n      );\r\n  }\r\n}\r\n","<div class=\"loading-box-overflow\"\r\n     *ngIf=\"isLoading$ | async\">\r\n  <mat-spinner diameter=\"50\"></mat-spinner>\r\n</div>\r\n<ng-container *ngIf=\"metadata$ | async as metadata; else noMetadata\">\r\n  <mat-administration-breadcrumbs [collectionName]=\"collectionName$ | async\"\r\n                                  action=\"list\"></mat-administration-breadcrumbs>\r\n  <mat-toolbar class=\"justify-between\">\r\n    <h1>Manage {{metadata?.plural}}</h1>\r\n    <button mat-raised-button\r\n            color=\"primary\"\r\n            routerLink=\"/{{collectionPath$ | async}}/add\">\r\n      <mat-icon>add</mat-icon> Add {{metadata?.single}}\r\n    </button>\r\n  </mat-toolbar>\r\n  <table mat-table\r\n         *ngIf=\"(list$ | async)?.length\"\r\n         [dataSource]=\"list$ | async\"\r\n         class=\"mat-elevation-z8\">\r\n    <ng-container *ngFor=\"let column of displayedColumns$ | async\">\r\n      <ng-container [matColumnDef]=\"column?.id\"\r\n                    *ngIf=\"column?.id != 'actions' && column?.id != 'entities'\">\r\n        <th mat-header-cell\r\n            *matHeaderCellDef> {{column?.label}} </th>\r\n        <td mat-cell\r\n            *matCellDef=\"let element\">\r\n          <ng-container [ngSwitch]=\"column?.format\">\r\n            <ng-container *ngSwitchCase=\"'image'\">\r\n              <img [src]=\"getValue(element, column?.id) | async\"\r\n                   class=\"list-image\"\r\n                   [style]=\"column?.style?.list\"\r\n                   [alt]=\"column?.id\" />\r\n            </ng-container>\r\n\r\n            <ng-container *ngSwitchDefault>\r\n              <span [style]=\"column?.style?.list\"\r\n                    [innerHTML]=\"getValue(element, column?.id) | async\"></span>\r\n            </ng-container>\r\n          </ng-container>\r\n        </td>\r\n      </ng-container>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"entities\">\r\n      <th mat-header-cell\r\n          *matHeaderCellDef>Manage</th>\r\n      <td mat-cell\r\n          *matCellDef=\"let element\">\r\n        <button mat-raised-button\r\n                [matMenuTriggerFor]=\"entitiesMenu\">More...</button>\r\n        <mat-menu #entitiesMenu=\"matMenu\">\r\n          <button *ngFor=\"let subCollection of subCollections$ | async\"\r\n                  mat-menu-item\r\n                  aria-label=\"Manage\"\r\n                  routerLink=\"/{{collectionName$ | async}}:{{element.id}}:{{subCollection?.id}}/list\">\r\n            {{subCollection?.plural | titlecase}}\r\n          </button>\r\n        </mat-menu>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <ng-container matColumnDef=\"actions\">\r\n      <th mat-header-cell\r\n          *matHeaderCellDef></th>\r\n      <td mat-cell\r\n          *matCellDef=\"let element\">\r\n        <button mat-icon-button\r\n                aria-label=\"Edit\"\r\n                routerLink=\"/{{collectionPath$ | async}}/update/{{element.id}}\">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n        <button mat-icon-button\r\n                color=\"warn\"\r\n                aria-label=\"Delete\"\r\n                (click)=\"delete(element)\">\r\n          <mat-icon>delete</mat-icon>\r\n        </button>\r\n      </td>\r\n    </ng-container>\r\n\r\n    <tr mat-header-row\r\n        *matHeaderRowDef=\"displayedColumnsNames$ | async\"></tr>\r\n    <tr mat-row\r\n        *matRowDef=\"let row; columns: displayedColumnsNames$ | async;\"></tr>\r\n  </table>\r\n\r\n  <mat-card *ngIf=\"!(list$ | async)?.length\">\r\n    No {{metadata?.plural}} added. <a mat-button\r\n       color=\"primary\"\r\n       routerLink=\"/{{collectionPath$ | async}}/add\">Add {{metadata?.single}}</a>\r\n  </mat-card>\r\n</ng-container>\r\n\r\n<ng-template #noMetadata>\r\n  <mat-chip-list>\r\n    <mat-chip color=\"warn\">No entity metadata defined for&nbsp;<strong>{{collectionName$ | async}}</strong>!</mat-chip>\r\n  </mat-chip-list>\r\n</ng-template>\r\n","import { Component, Optional, Inject } from '@angular/core';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { map, switchMap, shareReplay, tap, withLatestFrom } from 'rxjs/operators';\r\nimport { ValueFormatService } from '../../services/value-format.service';\r\nimport { pickBy } from 'lodash';\r\nimport { MetadataComponent } from '../metadata/metadata.component';\r\nimport { SnackbarService } from '../../services/snackbar.service';\r\nimport { capitalize } from 'lodash';\r\nimport { DataAdapterService } from '../../services/data-adapter.service';\r\n\r\n@Component({\r\n  selector: 'mat-administration-list',\r\n  templateUrl: './list.component.html',\r\n  styleUrls: ['./list.component.scss']\r\n})\r\nexport class ListComponent extends MetadataComponent {\r\n  displayedColumns$: Observable<any[]>;\r\n  displayedColumnsNames$: Observable<string[]>;\r\n  list$: Observable<any[]>;\r\n\r\n  constructor(\r\n    public route: ActivatedRoute,\r\n    private valueFormatService: ValueFormatService,\r\n    private snackbar: SnackbarService,\r\n    public dataAdapterService: DataAdapterService,\r\n    @Optional() @Inject('MAT_ADMINISTRATION_METADATA') public metadata: any\r\n  ) {\r\n    super(route, dataAdapterService, metadata);\r\n\r\n    this.displayedColumns$ = this.getDisplayedColumns();\r\n    this.displayedColumnsNames$ = this.displayedColumns$.pipe(map(columns => columns.map(column => column?.id)));\r\n    this.list$ = this.collectionName$.pipe(\r\n      switchMap(collection => this.dataAdapterService.list(collection, this.metadata$.getValue()?.idField || 'id')),\r\n      tap(() => this.isLoading$.next(false)),\r\n      shareReplay(1)\r\n    );\r\n  }\r\n\r\n  getValue(element, column) {\r\n    return this.metadata$.pipe(map(\r\n      metadata => this.valueFormatService.transform(element[column], metadata?.fields[column]?.type, metadata?.fields[column])\r\n    ));\r\n  }\r\n\r\n  delete(element) {\r\n    this.isLoading$.next(true);\r\n    this.dataAdapterService.delete(this.collectionName$.getValue(), element?.id)\r\n      .subscribe(\r\n        () => this.snackbar.success(`${capitalize(this.metadata$.getValue()?.single)} added successfully!`),\r\n        () => this.snackbar.error(`There was an error adding ${this.metadata$.getValue()?.single}!`),\r\n        () => this.isLoading$.next(false)\r\n      );\r\n  }\r\n\r\n  private getDisplayedColumns() {\r\n    return this.metadata$.pipe(\r\n      withLatestFrom(this.subCollections$),\r\n      map(([metadata, subCollections]) => {\r\n        const collumns = this.getDisplayableColumns(metadata?.fields);\r\n        if (subCollections) {\r\n          collumns.push({ id: 'entities', label: 'Manage' });\r\n        }\r\n        collumns.push({ id: 'actions', label: 'Actions' });\r\n\r\n        return collumns;\r\n      }),\r\n      shareReplay(1)\r\n    );\r\n  }\r\n\r\n  private getDisplayableColumns(columns) {\r\n    if (!columns) {\r\n      return [];\r\n    }\r\n\r\n    return Object.keys(pickBy(columns, col => col && !col?.hideInList)).map(column => {\r\n      return {\r\n        ...columns[column],\r\n        label: columns[column]?.label || this.getFieldLabel({ label: column }),\r\n        id: columns[column]?.id || column\r\n      };\r\n    });\r\n  }\r\n}\r\n","<div class=\"loading-box-overflow\"\r\n     *ngIf=\"isLoading$ | async\">\r\n  <mat-spinner diameter=\"50\"></mat-spinner>\r\n</div>\r\n<ng-container *ngIf=\"metadata$ | async as metadata; else noMetadata\">\r\n  <mat-administration-breadcrumbs [collectionName]=\"collectionName$ | async\"\r\n                                  action=\"update\"></mat-administration-breadcrumbs>\r\n  <mat-toolbar class=\"justify-between toolbar-main\">\r\n    <h1>Update {{metadata?.single}}</h1>\r\n    <span class=\"entity-title\">{{entityTitle$ | async}}<br /><small>#{{id$ | async}}</small></span>\r\n    <a mat-raised-button\r\n       color=\"warn\"\r\n       routerLink=\"/{{collectionPath$ | async}}/list\">\r\n      <mat-icon>keyboard_backspace</mat-icon> Cancel\r\n    </a>\r\n  </mat-toolbar>\r\n  <mat-toolbar *ngIf=\"subCollections$ | async as subCollections\">\r\n    <a *ngFor=\"let subCollection of subCollections\"\r\n       mat-raised-button\r\n       aria-label=\"Manage\"\r\n       routerLink=\"/{{collectionName$ | async}}:{{id$ | async}}:{{subCollection?.id}}/list\">\r\n      {{subCollection?.plural | titlecase}}\r\n    </a>\r\n  </mat-toolbar>\r\n  <mat-card>\r\n    <mat-administration-form *ngIf=\"fields$ | async\"\r\n                             [fields]=\"fields$ | async\"\r\n                             (save)=\"save($event);\"></mat-administration-form>\r\n  </mat-card>\r\n</ng-container>\r\n\r\n<ng-template #noMetadata>\r\n  <mat-chip-list>\r\n    <mat-chip color=\"warn\">No entity metadata defined for&nbsp;<strong>{{collectionName$ | async}}</strong>!</mat-chip>\r\n  </mat-chip-list>\r\n</ng-template>\r\n","import { Component, ChangeDetectionStrategy, Optional, Inject } from '@angular/core';\r\nimport { MetadataComponent } from '../metadata/metadata.component';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { Observable, combineLatest, BehaviorSubject } from 'rxjs';\r\nimport { map, shareReplay, takeUntil, tap, take, switchMap } from 'rxjs/operators';\r\nimport { SnackbarService } from '../../services/snackbar.service';\r\nimport { capitalize } from 'lodash';\r\nimport { DataAdapterService } from '../../services/data-adapter.service';\r\n\r\n@Component({\r\n  selector: 'mat-administration-update',\r\n  templateUrl: './update.component.html',\r\n  styleUrls: ['./update.component.scss']\r\n})\r\nexport class UpdateComponent extends MetadataComponent {\r\n  fields$: Observable<any[]>;\r\n  doc$: Observable<any>;\r\n  id$: BehaviorSubject<any> = new BehaviorSubject(null);\r\n  entityTitle$: Observable<string>;\r\n\r\n  constructor(\r\n    public route: ActivatedRoute,\r\n    private snackbar: SnackbarService,\r\n    private router: Router,\r\n    public dataAdapterService: DataAdapterService,\r\n    @Optional() @Inject('MAT_ADMINISTRATION_METADATA') public metadata: any\r\n  ) {\r\n    super(route, dataAdapterService, metadata);\r\n\r\n    this.route.params.pipe(map(params => params.id), takeUntil(this.destroyed$)).subscribe(this.id$);\r\n    this.doc$ = this.getDoc();\r\n    this.fields$ = combineLatest([this.getFields(), this.doc$])\r\n      .pipe(\r\n        map(([fields, doc]) => fields.map(field => {\r\n          return { ...field, value: this.getFieldValue(field, doc) };\r\n        }))\r\n      );\r\n    this.entityTitle$ = this.doc$.pipe(map(doc => doc?.[this.metadata$.getValue()?.titleField || 'title']));\r\n  }\r\n\r\n  save(item: any) {\r\n    this.isLoading$.next(true);\r\n\r\n    combineLatest([\r\n      this.metadata$,\r\n      this.collectionName$\r\n    ])\r\n      .pipe(\r\n        take(1),\r\n        switchMap(([metadata, collectionName]) => {\r\n          return this.processUploads(item, metadata, 'update').pipe(map(updatedItem => {\r\n            return [\r\n              metadata,\r\n              collectionName,\r\n              updatedItem\r\n            ];\r\n          }));\r\n        }),\r\n        switchMap(([_, collectionName, updatedItem]) =>\r\n          this.dataAdapterService.update(collectionName, this.id$.getValue(), this.getWithTimestamps(updatedItem, 'update'))\r\n        )\r\n      ).subscribe(\r\n        () => {\r\n          this.snackbar.success(`${capitalize(this.metadata$.getValue()?.single)} updated successfully!`);\r\n          this.router.navigate([`/${this.collectionPath$.getValue()}/list`]);\r\n        },\r\n        () => this.snackbar.error(`There was an error updating ${this.metadata$.getValue()?.single}!`),\r\n        () => this.isLoading$.next(false)\r\n      );\r\n  }\r\n\r\n  private getDoc() {\r\n    return this.dataAdapterService.get(this.collectionName$.getValue(), this.id$.getValue()).pipe(\r\n      tap(() => this.isLoading$.next(false)),\r\n      shareReplay(1)\r\n    );\r\n  }\r\n\r\n  private getFieldValue(field: any, doc: any) {\r\n    if (field?.type === 'timestamp') {\r\n      return doc?.[field?.name]?.toDate();\r\n    }\r\n\r\n    return doc?.[field?.name];\r\n  }\r\n}\r\n","<mat-nav-list color=\"primary\">\n  <ng-container *ngFor=\"let entity of entities\">\n    <a mat-list-item\n       color=\"primary\"\n       routerLinkActive=\"active\"\n       [routerLink]=\"entity.id\"> {{entity.plural | titlecase}} </a>\n    <mat-divider *ngIf=\"entity?.showMenuDividerAfter\"></mat-divider>\n  </ng-container>\n</mat-nav-list>\n","import { Component, OnInit, Optional, Inject } from '@angular/core';\n\n@Component({\n  selector: 'mat-administration-menu',\n  templateUrl: './menu.component.html',\n  styleUrls: ['./menu.component.css']\n})\nexport class MenuComponent {\n  entities = Object.keys(this.metadata?.entities).filter((key: any) => !this.metadata.entities[key]?.hideList).map(key => {\n    return {\n      id: key,\n      ...this.metadata.entities[key]\n    };\n  });\n\n  constructor(\n    @Optional() @Inject('MAT_ADMINISTRATION_METADATA') private metadata: any\n  ) { }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule, DatePipe } from '@angular/common';\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatChipsModule } from '@angular/material/chips';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatDatepickerModule } from '@angular/material/datepicker';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { CKEditorModule } from '@ckeditor/ckeditor5-angular';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { MatCheckboxModule } from '@angular/material/checkbox';\r\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { RouterModule } from '@angular/router';\r\nimport { ListComponent, AddComponent, UpdateComponent, MetadataComponent, FormComponent, MenuComponent, BreadcrumbsComponent } from './components/index';\r\nimport { ValueFormatService } from './services/value-format.service';\r\nimport { CdkTableModule } from '@angular/cdk/table';\r\nimport { MatNativeDateModule } from '@angular/material/core';\r\nimport { MatFileInputModule } from '@weblauncher/material-file-input';\r\nimport { AngularFirestoreModule } from '@angular/fire/firestore';\r\nimport { AngularFireStorageModule } from '@angular/fire/storage';\r\nimport { FirebaseAppConfig, FIREBASE_OPTIONS, FIREBASE_APP_NAME } from '@angular/fire';\r\nimport { FlexLayoutModule } from '@angular/flex-layout';\r\nimport { MatPaginatorModule } from '@angular/material/paginator';\r\nimport { MatSortModule } from '@angular/material/sort';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatListModule } from '@angular/material/list';\r\nimport { BrowserAnimationsModule } from '@angular/platform-browser/animations';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ListComponent,\r\n    AddComponent,\r\n    UpdateComponent,\r\n    MetadataComponent,\r\n    FormComponent,\r\n    BreadcrumbsComponent,\r\n    MenuComponent\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    MatChipsModule,\r\n    MatCardModule,\r\n    MatIconModule,\r\n    MatToolbarModule,\r\n    RouterModule,\r\n    MatProgressSpinnerModule,\r\n    CdkTableModule,\r\n    MatTableModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatFileInputModule,\r\n    MatButtonModule,\r\n    CKEditorModule,\r\n    MatInputModule,\r\n    MatSelectModule,\r\n    MatRadioModule,\r\n    MatCheckboxModule,\r\n    MatSlideToggleModule,\r\n    MatDatepickerModule,\r\n    MatSnackBarModule,\r\n    MatNativeDateModule,\r\n    MatPaginatorModule,\r\n    MatSortModule,\r\n    AngularFirestoreModule,\r\n    AngularFireStorageModule,\r\n    FlexLayoutModule,\r\n    MatMenuModule,\r\n    MatSidenavModule,\r\n    MatListModule\r\n  ],\r\n  providers: [\r\n    ValueFormatService,\r\n    DatePipe\r\n  ],\r\n  exports: [\r\n    ListComponent,\r\n    AddComponent,\r\n    UpdateComponent,\r\n    MetadataComponent,\r\n    FormComponent,\r\n    MenuComponent,\r\n    BreadcrumbsComponent,\r\n    RouterModule,\r\n    BrowserAnimationsModule,\r\n    AngularFirestoreModule,\r\n    AngularFireStorageModule\r\n  ]\r\n})\r\nexport class MaterialAdministrationModule {\r\n  static forRoot(\r\n    configFactory: FirebaseAppConfig,\r\n    appNameFactory: () => string | undefined = () => undefined,\r\n  ): ModuleWithProviders {\r\n    return {\r\n      ngModule: MaterialAdministrationModule,\r\n      providers:\r\n        [\r\n          {\r\n            provide: FIREBASE_OPTIONS,\r\n            useValue: configFactory\r\n          },\r\n          {\r\n            provide: FIREBASE_APP_NAME,\r\n            useFactory: appNameFactory\r\n          },\r\n          ValueFormatService\r\n        ]\r\n    };\r\n  }\r\n}\r\n","import { Routes } from '@angular/router';\r\nimport { ListComponent, AddComponent, UpdateComponent } from './components';\r\n\r\nexport const materialAdministrationRoutes: Routes = [\r\n  {\r\n    path: ':collection/list',\r\n    component: ListComponent\r\n  },\r\n  {\r\n    path: ':collection/add',\r\n    component: AddComponent\r\n  },\r\n  {\r\n    path: ':collection/update/:id',\r\n    component: UpdateComponent\r\n  },\r\n  {\r\n    path: ':collection',\r\n    redirectTo: ':collection/list'\r\n  }];\r\n","/*\r\n * Public API Surface of material-administration\r\n */\r\n\r\nexport * from './lib/components/index';\r\nexport * from './lib/services/index';\r\nexport * from './lib/material-administration.module';\r\nexport * from './lib/types/index';\r\nexport * from './lib/material-administration.routes';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":["uuidv4","firebase.firestore","i0.ɵɵelementStart","i0.ɵɵtext","i0.ɵɵelementEnd","i0.ɵɵelementContainerStart","i0.ɵɵelementContainerEnd","i0.ɵɵadvance","i0.ɵɵtextInterpolate1","i0.ɵɵtemplate","i0.ɵɵproperty","i0.ɵɵelementContainer","i0.ɵɵelement","i0.ɵɵtextInterpolate","i0.ɵɵlistener","i0.ɵɵpropertyInterpolate1","i0.ɵɵstyleMap","i0.ɵɵpropertyInterpolate3","i0.ɵɵpropertyInterpolate2"],"mappings":"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"}